{
  "openapi": "3.1.0",
  "info": {
    "version": "2.0.0",
    "title": "Ferretería API",
    "description": "API REST para gestión de ferretería con soporte multi-tenant.\n      \n**Características:**\n- Multi-tenancy por subdominio\n- Autenticación JWT\n- Gestión completa de inventario\n- Control de caja y ventas\n- Integración SUNAT\n- Auditoría completa\n\n**Autenticación:**\nTodos los endpoints (excepto /auth) requieren token JWT en header Authorization: Bearer <token>",
    "contact": {
      "name": "Soporte API",
      "email": "soporte@ferreteria.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3001",
      "description": "Servidor de desarrollo"
    },
    {
      "url": "https://api.ferreteria.com",
      "description": "Servidor de producción"
    }
  ],
  "tags": [
    {
      "name": "Productos",
      "description": "Gestión de productos e inventario"
    },
    {
      "name": "Categorías",
      "description": "Categorías de productos"
    },
    {
      "name": "Marcas",
      "description": "Marcas de productos"
    },
    {
      "name": "Unidades de Medida",
      "description": "Unidades de medida SUNAT (UND, KG, etc)"
    },
    {
      "name": "Clientes",
      "description": "Gestión de clientes"
    },
    {
      "name": "Autenticación",
      "description": "Autenticación y autorización"
    },
    {
      "name": "Ventas",
      "description": "Punto de venta (POS)"
    },
    {
      "name": "Proveedores",
      "description": "Gestión de proveedores"
    },
    {
      "name": "Órdenes de Compra",
      "description": "Compras a proveedores"
    },
    {
      "name": "Pedidos",
      "description": "Pedidos de clientes"
    },
    {
      "name": "Cajas",
      "description": "Gestión de cajas registradoras"
    },
    {
      "name": "Sesiones de Caja",
      "description": "Apertura y cierre de caja"
    },
    {
      "name": "Movimientos de Caja",
      "description": "Ingresos y egresos manuales"
    },
    {
      "name": "Series SUNAT",
      "description": "Numeración de comprobantes"
    },
    {
      "name": "Usuarios",
      "description": "Gestión de usuarios del tenant"
    },
    {
      "name": "Auditoría",
      "description": "Logs de auditoría"
    },
    {
      "name": "Reportes",
      "description": "Reportes y analíticas"
    },
    {
      "name": "Tenant",
      "description": "Configuración del tenant"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Token JWT obtenido del endpoint /api/auth/login"
      }
    },
    "schemas": {
      "PaginationQuery": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "default": 1,
            "description": "Número de página",
            "example": 1
          },
          "limit": {
            "type": [
              "integer",
              "null"
            ],
            "minimum": 0,
            "maximum": 100,
            "default": 10,
            "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
            "example": 10
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Mensaje de error",
            "example": "Error al procesar la solicitud"
          },
          "errors": {
            "type": "object",
            "additionalProperties": {},
            "description": "Detalles de validación (si aplica)"
          }
        },
        "required": [
          "message"
        ]
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Mensaje de éxito",
            "example": "Operación completada exitosamente"
          }
        },
        "required": [
          "message"
        ]
      },
      "RegisterTenant": {
        "type": "object",
        "properties": {
          "nombre_empresa": {
            "type": "string",
            "minLength": 1,
            "description": "Nombre de la empresa/tenant",
            "example": "Ferretería El Tornillo"
          },
          "subdominio": {
            "type": "string",
            "minLength": 3,
            "pattern": "^[a-z0-9-]+$",
            "description": "Subdominio único para el tenant",
            "example": "el-tornillo"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email del usuario administrador",
            "example": "admin@eltornillo.com"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "description": "Contraseña para el usuario administrador",
            "example": "SecurePass123!"
          }
        },
        "required": [
          "nombre_empresa",
          "subdominio",
          "email",
          "password"
        ]
      },
      "Login": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email del usuario",
            "example": "admin@eltornillo.com"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "description": "Contraseña del usuario",
            "example": "SecurePass123!"
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "VerifyTenant": {
        "type": "object",
        "properties": {
          "tenantId": {
            "type": "integer",
            "description": "ID del tenant a verificar",
            "example": 1
          },
          "subdominio": {
            "type": "string",
            "minLength": 1,
            "description": "Subdominio del tenant a verificar",
            "example": "el-tornillo"
          }
        }
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "JWT token de autenticación",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "user": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "example": 1
              },
              "email": {
                "type": "string",
                "example": "admin@eltornillo.com"
              },
              "nombre": {
                "type": [
                  "string",
                  "null"
                ],
                "example": "Admin"
              },
              "rol": {
                "type": "string",
                "example": "admin"
              }
            },
            "required": [
              "id",
              "email",
              "nombre",
              "rol"
            ],
            "description": "Información del usuario autenticado"
          },
          "tenant": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "example": 1
              },
              "nombre_empresa": {
                "type": "string",
                "example": "Ferretería El Tornillo"
              },
              "subdominio": {
                "type": "string",
                "example": "el-tornillo"
              }
            },
            "required": [
              "id",
              "nombre_empresa",
              "subdominio"
            ],
            "description": "Información del tenant"
          }
        },
        "required": [
          "token",
          "user",
          "tenant"
        ]
      },
      "RegisterResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "Tenant registrado exitosamente. Requiere activación manual en desarrollo."
          },
          "tenant": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "example": 1
              },
              "nombre_empresa": {
                "type": "string",
                "example": "Ferretería El Tornillo"
              },
              "subdominio": {
                "type": "string",
                "example": "el-tornillo"
              },
              "isActive": {
                "type": "boolean",
                "example": false,
                "description": "Indica si el tenant está activo (requiere verificación manual en dev)"
              }
            },
            "required": [
              "id",
              "nombre_empresa",
              "subdominio",
              "isActive"
            ]
          }
        },
        "required": [
          "message",
          "tenant"
        ]
      },
      "IdParam": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID del recurso",
            "example": 1
          }
        },
        "required": [
          "id"
        ]
      },
      "SesionIdParam": {
        "type": "object",
        "properties": {
          "sesionId": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID de la sesión de caja",
            "example": 1
          }
        },
        "required": [
          "sesionId"
        ]
      },
      "CreatePedidoPublico": {
        "type": "object",
        "properties": {
          "cliente": {
            "type": "object",
            "properties": {
              "nombre": {
                "type": "string",
                "minLength": 1,
                "maxLength": 200,
                "description": "Nombre completo del cliente",
                "example": "Juan Pérez"
              },
              "documento_identidad": {
                "type": "string",
                "pattern": "^[0-9]{8}$|^[0-9]{11}$",
                "description": "DNI (8 dígitos) o RUC (11 dígitos) del cliente",
                "example": "12345678"
              },
              "email": {
                "type": "string",
                "maxLength": 100,
                "format": "email",
                "description": "Email del cliente para notificaciones",
                "example": "juan.perez@email.com"
              },
              "telefono": {
                "type": "string",
                "minLength": 7,
                "maxLength": 30,
                "description": "Teléfono de contacto del cliente",
                "example": "987654321"
              },
              "direccion": {
                "type": "string",
                "maxLength": 500,
                "description": "Dirección del cliente (opcional, requerido si tipo_recojo es \"envio\")",
                "example": "Av. Los Proceres 123, Lima"
              }
            },
            "required": [
              "nombre",
              "documento_identidad",
              "email",
              "telefono"
            ],
            "description": "Datos del cliente (se buscará o creará automáticamente)"
          },
          "tipo_recojo": {
            "type": "string",
            "enum": [
              "tienda",
              "envio"
            ],
            "description": "Tipo de recojo: en tienda o envío a domicilio",
            "example": "tienda"
          },
          "carrito": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "producto_id": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "description": "ID del producto a pedir",
                  "example": 1
                },
                "cantidad": {
                  "anyOf": [
                    {
                      "type": "number"
                    },
                    {
                      "type": "string"
                    }
                  ],
                  "description": "Cantidad solicitada (máximo 3 decimales)",
                  "example": 2
                }
              },
              "required": [
                "producto_id",
                "cantidad"
              ]
            },
            "minItems": 1,
            "description": "Lista de productos en el carrito"
          }
        },
        "required": [
          "cliente",
          "tipo_recojo",
          "carrito"
        ]
      },
      "PedidoPublicoResponse": {
        "type": "object",
        "properties": {
          "pedido_id": {
            "type": "integer",
            "description": "ID del pedido creado",
            "example": 150
          },
          "estado": {
            "type": "string",
            "enum": [
              "pendiente"
            ],
            "description": "Estado inicial del pedido (siempre \"pendiente\")",
            "example": "pendiente"
          },
          "mensaje": {
            "type": "string",
            "description": "Mensaje de confirmación para el cliente",
            "example": "Pedido registrado exitosamente. Recibirá un correo de confirmación pronto."
          }
        },
        "required": [
          "pedido_id",
          "estado",
          "mensaje"
        ]
      },
      "ProductoCatalogoPublico": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID del producto",
            "example": 1
          },
          "nombre": {
            "type": "string",
            "description": "Nombre del producto",
            "example": "Martillo de Acero 500g"
          },
          "descripcion": {
            "type": [
              "string",
              "null"
            ],
            "description": "Descripción del producto",
            "example": "Martillo profesional con mango ergonómico"
          },
          "precio_venta": {
            "type": "number",
            "description": "Precio final de venta (incluye IGV si aplica)",
            "example": 45.5
          },
          "disponible": {
            "type": "boolean",
            "description": "Indica si el producto tiene stock disponible",
            "example": true
          },
          "stock": {
            "type": "number",
            "description": "Stock disponible",
            "example": 150
          },
          "imagen_url": {
            "type": [
              "string",
              "null"
            ],
            "description": "URL de la imagen principal del producto",
            "example": "https://res.cloudinary.com/..."
          },
          "marca": {
            "type": [
              "string",
              "null"
            ],
            "description": "Nombre de la marca",
            "example": "Stanley"
          },
          "categoria": {
            "type": [
              "string",
              "null"
            ],
            "description": "Nombre de la categoría",
            "example": "Herramientas"
          },
          "sku": {
            "type": [
              "string",
              "null"
            ],
            "description": "Código SKU del producto",
            "example": "MRT-500"
          }
        },
        "required": [
          "id",
          "nombre",
          "descripcion",
          "precio_venta",
          "disponible",
          "stock",
          "imagen_url",
          "marca",
          "categoria",
          "sku"
        ]
      },
      "CatalogoPublicoQuery": {
        "type": "object",
        "properties": {
          "q": {
            "type": "string",
            "description": "Término de búsqueda (nombre, SKU)",
            "example": "martillo"
          },
          "categoria_id": {
            "type": "string",
            "description": "Filtrar por ID de categoría",
            "example": "5"
          },
          "marca_id": {
            "type": "string",
            "description": "Filtrar por ID de marca",
            "example": "3"
          },
          "limit": {
            "type": "string",
            "description": "Número máximo de productos a devolver (default: 50, max: 100)",
            "example": "20"
          }
        }
      },
      "CreateProducto": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "description": "Nombre del producto",
            "example": "Martillo Stanley 16oz"
          },
          "sku": {
            "type": "string",
            "minLength": 1,
            "description": "Código SKU único del producto",
            "example": "MAR-ST-16"
          },
          "descripcion": {
            "type": "string",
            "description": "Descripción detallada del producto",
            "example": "Martillo de carpintero con mango de fibra de vidrio"
          },
          "precio_venta": {
            "type": "number",
            "exclusiveMinimum": 0,
            "description": "Precio de venta CON IGV (18%)",
            "example": 59
          },
          "afectacion_igv": {
            "type": "string",
            "enum": [
              "GRAVADO",
              "EXONERADO",
              "INAFECTO"
            ],
            "default": "GRAVADO",
            "description": "Tipo de afectación al IGV según SUNAT",
            "example": "GRAVADO"
          },
          "costo_compra": {
            "type": "number",
            "minimum": 0,
            "description": "Costo de compra/adquisición (opcional)",
            "example": 35
          },
          "stock": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "default": 0,
            "description": "Cantidad en inventario (soporta decimales, default: 0)",
            "example": 100.5
          },
          "stock_minimo": {
            "type": "integer",
            "minimum": 0,
            "default": 5,
            "description": "Stock mínimo para alertas (default: 5)",
            "example": 10
          },
          "categoria_id": {
            "type": "integer",
            "description": "ID de la categoría del producto",
            "example": 5
          },
          "unidad_medida_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID de la unidad de medida (NIU, UND, KG, etc.)",
            "example": 1
          },
          "marca_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID de la marca del producto",
            "example": 3
          },
          "imagen_url": {
            "type": [
              "string",
              "null"
            ],
            "format": "uri",
            "description": "URL de la imagen en Cloudinary",
            "example": "https://res.cloudinary.com/ferreteria/image/upload/v1234567890/productos/martillo.jpg"
          }
        },
        "required": [
          "nombre",
          "precio_venta",
          "unidad_medida_id"
        ]
      },
      "UpdateProducto": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "description": "Nombre del producto",
            "example": "Martillo Stanley 16oz"
          },
          "sku": {
            "type": "string",
            "minLength": 1,
            "description": "Código SKU único del producto",
            "example": "MAR-ST-16"
          },
          "descripcion": {
            "type": "string",
            "description": "Descripción detallada del producto",
            "example": "Martillo de carpintero con mango de fibra de vidrio"
          },
          "precio_venta": {
            "type": "number",
            "exclusiveMinimum": 0,
            "description": "Precio de venta CON IGV (18%)",
            "example": 59
          },
          "afectacion_igv": {
            "type": "string",
            "enum": [
              "GRAVADO",
              "EXONERADO",
              "INAFECTO"
            ],
            "default": "GRAVADO",
            "description": "Tipo de afectación al IGV según SUNAT",
            "example": "GRAVADO"
          },
          "costo_compra": {
            "type": "number",
            "minimum": 0,
            "description": "Costo de compra/adquisición (opcional)",
            "example": 35
          },
          "stock": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "default": 0,
            "description": "Cantidad en inventario (soporta decimales, default: 0)",
            "example": 100.5
          },
          "stock_minimo": {
            "type": "integer",
            "minimum": 0,
            "default": 5,
            "description": "Stock mínimo para alertas (default: 5)",
            "example": 10
          },
          "categoria_id": {
            "type": "integer",
            "description": "ID de la categoría del producto",
            "example": 5
          },
          "unidad_medida_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID de la unidad de medida (NIU, UND, KG, etc.)",
            "example": 1
          },
          "marca_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID de la marca del producto",
            "example": 3
          },
          "imagen_url": {
            "type": [
              "string",
              "null"
            ],
            "format": "uri",
            "description": "URL de la imagen en Cloudinary",
            "example": "https://res.cloudinary.com/ferreteria/image/upload/v1234567890/productos/martillo.jpg"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo (para borrado lógico)",
            "example": true
          }
        }
      },
      "Producto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único del producto",
            "example": 1
          },
          "nombre": {
            "type": "string",
            "example": "Martillo Stanley 16oz"
          },
          "sku": {
            "type": [
              "string",
              "null"
            ],
            "example": "MAR-ST-16"
          },
          "descripcion": {
            "type": [
              "string",
              "null"
            ],
            "example": "Martillo de carpintero con mango de fibra de vidrio"
          },
          "precio_base": {
            "type": "number",
            "description": "Precio sin IGV (calculado automáticamente)",
            "example": 50
          },
          "precio_venta": {
            "type": "number",
            "description": "Precio con IGV",
            "example": 59
          },
          "afectacion_igv": {
            "type": "string",
            "enum": [
              "GRAVADO",
              "EXONERADO",
              "INAFECTO"
            ],
            "example": "GRAVADO"
          },
          "costo_compra": {
            "type": [
              "number",
              "null"
            ],
            "example": 35
          },
          "stock": {
            "type": "number",
            "description": "Cantidad disponible (puede ser decimal)",
            "example": 100.5
          },
          "stock_minimo": {
            "type": "integer",
            "description": "Stock mínimo para alertas",
            "example": 10
          },
          "imagen_url": {
            "type": [
              "string",
              "null"
            ],
            "example": "https://res.cloudinary.com/ferreteria/image/upload/v1234567890/productos/martillo.jpg"
          },
          "marca_id": {
            "type": [
              "integer",
              "null"
            ],
            "example": 3
          },
          "unidad_medida_id": {
            "type": "integer",
            "example": 1
          },
          "categoria_id": {
            "type": [
              "integer",
              "null"
            ],
            "example": 5
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado del producto (soft delete)",
            "example": true
          },
          "tenant_id": {
            "type": "integer",
            "description": "ID del tenant propietario",
            "example": 1
          }
        },
        "required": [
          "id",
          "nombre",
          "sku",
          "descripcion",
          "precio_base",
          "precio_venta",
          "afectacion_igv",
          "costo_compra",
          "stock",
          "stock_minimo",
          "imagen_url",
          "marca_id",
          "unidad_medida_id",
          "categoria_id",
          "isActive",
          "tenant_id"
        ]
      },
      "UploadImagenProducto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Mensaje de éxito",
            "example": "Imagen subida exitosamente"
          },
          "producto": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "example": 1
              },
              "nombre": {
                "type": "string",
                "example": "Martillo"
              },
              "imagen_url": {
                "type": [
                  "string",
                  "null"
                ],
                "format": "uri",
                "description": "URL de la imagen original",
                "example": "https://res.cloudinary.com/ferreteria/image/upload/v1234567890/productos/martillo.jpg"
              },
              "thumbnail_small": {
                "type": [
                  "string",
                  "null"
                ],
                "format": "uri",
                "description": "URL del thumbnail pequeño (100x100)",
                "example": "https://res.cloudinary.com/ferreteria/image/upload/c_fill,h_100,w_100/v1234567890/productos/martillo.jpg"
              },
              "thumbnail_medium": {
                "type": [
                  "string",
                  "null"
                ],
                "format": "uri",
                "description": "URL del thumbnail mediano (300x300)",
                "example": "https://res.cloudinary.com/ferreteria/image/upload/c_fill,h_300,w_300/v1234567890/productos/martillo.jpg"
              }
            },
            "required": [
              "id",
              "nombre",
              "imagen_url"
            ],
            "description": "Datos del producto actualizado"
          }
        },
        "required": [
          "message",
          "producto"
        ]
      },
      "ProductosPaginated": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Producto"
            }
          },
          "meta": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de items",
                "example": 150
              },
              "page": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Página actual",
                "example": 1
              },
              "limit": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Items por página",
                "example": 10
              },
              "totalPages": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de páginas",
                "example": 15
              }
            },
            "required": [
              "total",
              "page",
              "limit",
              "totalPages"
            ]
          }
        },
        "required": [
          "data",
          "meta"
        ]
      },
      "CreateCategoria": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "description": "Nombre de la categoría",
            "example": "Herramientas Eléctricas"
          },
          "descripcion": {
            "type": "string",
            "description": "Descripción de la categoría",
            "example": "Herramientas eléctricas para construcción y mantenimiento"
          }
        },
        "required": [
          "nombre"
        ]
      },
      "UpdateCategoria": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "description": "Nombre de la categoría",
            "example": "Herramientas Eléctricas"
          },
          "descripcion": {
            "type": "string",
            "description": "Descripción de la categoría",
            "example": "Herramientas eléctricas para construcción y mantenimiento"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo (para borrado lógico)",
            "example": true
          }
        }
      },
      "Categoria": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único de la categoría",
            "example": 1
          },
          "nombre": {
            "type": "string",
            "example": "Herramientas Eléctricas"
          },
          "descripcion": {
            "type": [
              "string",
              "null"
            ],
            "example": "Herramientas eléctricas para construcción"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo",
            "example": true
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          }
        },
        "required": [
          "id",
          "nombre",
          "descripcion",
          "isActive",
          "tenant_id"
        ]
      },
      "PaginatedCategoriaResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Categoria"
            }
          },
          "meta": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de items",
                "example": 150
              },
              "page": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Página actual",
                "example": 1
              },
              "limit": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Items por página",
                "example": 10
              },
              "totalPages": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de páginas",
                "example": 15
              }
            },
            "required": [
              "total",
              "page",
              "limit",
              "totalPages"
            ]
          }
        },
        "required": [
          "data",
          "meta"
        ]
      },
      "CreateMarca": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "description": "Nombre de la marca",
            "example": "Stanley"
          },
          "logo_url": {
            "type": "string",
            "format": "uri",
            "description": "URL del logo de la marca",
            "example": "https://res.cloudinary.com/ferreteria/image/upload/v1234567890/marcas/stanley.png"
          }
        },
        "required": [
          "nombre"
        ]
      },
      "UpdateMarca": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "description": "Nombre de la marca",
            "example": "Stanley"
          },
          "logo_url": {
            "type": [
              "string",
              "null"
            ],
            "format": "uri",
            "description": "URL del logo de la marca",
            "example": "https://res.cloudinary.com/ferreteria/image/upload/v1234567890/marcas/stanley.png"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo",
            "example": true
          }
        }
      },
      "Marca": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único de la marca",
            "example": 1
          },
          "nombre": {
            "type": "string",
            "example": "Stanley"
          },
          "logo_url": {
            "type": [
              "string",
              "null"
            ],
            "example": "https://res.cloudinary.com/ferreteria/image/upload/v1234567890/marcas/stanley.png"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo",
            "example": true
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          }
        },
        "required": [
          "id",
          "nombre",
          "logo_url",
          "isActive",
          "tenant_id"
        ]
      },
      "PaginatedMarcaResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Marca"
            }
          },
          "meta": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de items",
                "example": 150
              },
              "page": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Página actual",
                "example": 1
              },
              "limit": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Items por página",
                "example": 10
              },
              "totalPages": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de páginas",
                "example": 15
              }
            },
            "required": [
              "total",
              "page",
              "limit",
              "totalPages"
            ]
          }
        },
        "required": [
          "data",
          "meta"
        ]
      },
      "CreateUnidadMedida": {
        "type": "object",
        "properties": {
          "codigo": {
            "type": "string",
            "minLength": 1,
            "maxLength": 10,
            "pattern": "^[A-Z0-9]+$",
            "description": "Código de la unidad de medida (SUNAT o personalizado)",
            "example": "NIU"
          },
          "nombre": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Nombre descriptivo de la unidad",
            "example": "UNIDAD (BIENES)"
          },
          "permite_decimales": {
            "type": "boolean",
            "default": false,
            "description": "Indica si permite cantidades con decimales",
            "example": false
          }
        },
        "required": [
          "codigo",
          "nombre"
        ]
      },
      "UpdateUnidadMedida": {
        "type": "object",
        "properties": {
          "codigo": {
            "type": "string",
            "minLength": 1,
            "maxLength": 10,
            "pattern": "^[A-Z0-9]+$",
            "description": "Código de la unidad de medida (SUNAT o personalizado)",
            "example": "NIU"
          },
          "nombre": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Nombre descriptivo de la unidad",
            "example": "UNIDAD (BIENES)"
          },
          "permite_decimales": {
            "type": "boolean",
            "default": false,
            "description": "Indica si permite cantidades con decimales",
            "example": false
          }
        }
      },
      "UnidadMedida": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único de la unidad de medida",
            "example": 1
          },
          "codigo": {
            "type": "string",
            "description": "Código SUNAT",
            "example": "NIU"
          },
          "nombre": {
            "type": "string",
            "description": "Nombre de la unidad",
            "example": "UNIDAD (BIENES)"
          },
          "permite_decimales": {
            "type": "boolean",
            "description": "Permite decimales",
            "example": false
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          }
        },
        "required": [
          "id",
          "codigo",
          "nombre",
          "permite_decimales",
          "tenant_id"
        ]
      },
      "PaginatedUnidadMedidaResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UnidadMedida"
            }
          },
          "meta": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de items",
                "example": 150
              },
              "page": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Página actual",
                "example": 1
              },
              "limit": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Items por página",
                "example": 10
              },
              "totalPages": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de páginas",
                "example": 15
              }
            },
            "required": [
              "total",
              "page",
              "limit",
              "totalPages"
            ]
          }
        },
        "required": [
          "data",
          "meta"
        ]
      },
      "CreateCliente": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "description": "Nombre o razón social del cliente",
            "example": "Juan Pérez"
          },
          "documento_identidad": {
            "type": "string",
            "pattern": "^[0-9]{8}$|^[0-9]{11}$",
            "description": "DNI (8 dígitos) o RUC (11 dígitos) del cliente",
            "example": "12345678"
          },
          "ruc": {
            "type": "string",
            "pattern": "^[0-9]{11}$",
            "description": "RUC del cliente (opcional, para facturación)",
            "example": "20123456789"
          },
          "razon_social": {
            "type": "string",
            "minLength": 1,
            "description": "Razón Social del cliente (opcional, requerido si tiene RUC)",
            "example": "Corporación ABC S.A.C."
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email del cliente",
            "example": "juan.perez@email.com"
          },
          "telefono": {
            "type": "string",
            "description": "Teléfono del cliente",
            "example": "987654321"
          },
          "direccion": {
            "type": "string",
            "description": "Dirección del cliente",
            "example": "Av. Los Proceres 123, Lima"
          }
        },
        "required": [
          "nombre"
        ]
      },
      "UpdateCliente": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "description": "Nombre o razón social del cliente",
            "example": "Juan Pérez"
          },
          "documento_identidad": {
            "type": "string",
            "pattern": "^[0-9]{8}$|^[0-9]{11}$",
            "description": "DNI (8 dígitos) o RUC (11 dígitos) del cliente",
            "example": "12345678"
          },
          "ruc": {
            "type": "string",
            "pattern": "^[0-9]{11}$",
            "description": "RUC del cliente (opcional, para facturación)",
            "example": "20123456789"
          },
          "razon_social": {
            "type": "string",
            "minLength": 1,
            "description": "Razón Social del cliente (opcional, requerido si tiene RUC)",
            "example": "Corporación ABC S.A.C."
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email del cliente",
            "example": "juan.perez@email.com"
          },
          "telefono": {
            "type": "string",
            "description": "Teléfono del cliente",
            "example": "987654321"
          },
          "direccion": {
            "type": "string",
            "description": "Dirección del cliente",
            "example": "Av. Los Proceres 123, Lima"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo (para borrado lógico)",
            "example": true
          }
        }
      },
      "Cliente": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único del cliente",
            "example": 1
          },
          "nombre": {
            "type": "string",
            "example": "Juan Pérez"
          },
          "documento_identidad": {
            "type": [
              "string",
              "null"
            ],
            "example": "12345678"
          },
          "ruc": {
            "type": [
              "string",
              "null"
            ],
            "description": "RUC del cliente (para facturación)",
            "example": "20123456789"
          },
          "razon_social": {
            "type": [
              "string",
              "null"
            ],
            "description": "Razón Social (requerido si tiene RUC)",
            "example": "INVERSIONES PEREZ S.A.C."
          },
          "email": {
            "type": [
              "string",
              "null"
            ],
            "example": "juan.perez@email.com"
          },
          "telefono": {
            "type": [
              "string",
              "null"
            ],
            "example": "987654321"
          },
          "direccion": {
            "type": [
              "string",
              "null"
            ],
            "example": "Av. Los Proceres 123, Lima"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo",
            "example": true
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          }
        },
        "required": [
          "id",
          "nombre",
          "documento_identidad",
          "ruc",
          "razon_social",
          "email",
          "telefono",
          "direccion",
          "isActive",
          "tenant_id"
        ]
      },
      "PaginatedClienteResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Cliente"
            }
          },
          "meta": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de items",
                "example": 150
              },
              "page": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Página actual",
                "example": 1
              },
              "limit": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Items por página",
                "example": 10
              },
              "totalPages": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de páginas",
                "example": 15
              }
            },
            "required": [
              "total",
              "page",
              "limit",
              "totalPages"
            ]
          }
        },
        "required": [
          "data",
          "meta"
        ]
      },
      "CreateProveedor": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "description": "Nombre o razón social del proveedor",
            "example": "Distribuidora ABC S.A.C."
          },
          "tipo_documento": {
            "type": "string",
            "enum": [
              "RUC",
              "DNI",
              "CE"
            ],
            "description": "Tipo de documento de identidad del proveedor",
            "example": "RUC"
          },
          "ruc_identidad": {
            "type": "string",
            "minLength": 1,
            "description": "Número de documento: RUC (11 dígitos), DNI (8 dígitos) o CE",
            "example": "20123456789"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email de contacto del proveedor",
            "example": "ventas@distribuidoraabc.com"
          },
          "telefono": {
            "type": "string",
            "description": "Teléfono del proveedor",
            "example": "01-2345678"
          },
          "direccion": {
            "type": "string",
            "description": "Dirección del proveedor",
            "example": "Av. Industrial 456, Lima"
          }
        },
        "required": [
          "nombre",
          "tipo_documento",
          "ruc_identidad"
        ]
      },
      "UpdateProveedor": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "description": "Nombre o razón social del proveedor",
            "example": "Distribuidora ABC S.A.C."
          },
          "tipo_documento": {
            "type": "string",
            "enum": [
              "RUC",
              "DNI",
              "CE"
            ],
            "description": "Tipo de documento de identidad del proveedor",
            "example": "RUC"
          },
          "ruc_identidad": {
            "type": "string",
            "minLength": 1,
            "description": "Número de documento: RUC (11 dígitos), DNI (8 dígitos) o CE",
            "example": "20123456789"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email de contacto del proveedor",
            "example": "ventas@distribuidoraabc.com"
          },
          "telefono": {
            "type": "string",
            "description": "Teléfono del proveedor",
            "example": "01-2345678"
          },
          "direccion": {
            "type": "string",
            "description": "Dirección del proveedor",
            "example": "Av. Industrial 456, Lima"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo (para borrado lógico)",
            "example": true
          }
        }
      },
      "Proveedor": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único del proveedor",
            "example": 1
          },
          "nombre": {
            "type": "string",
            "example": "Distribuidora ABC S.A.C."
          },
          "tipo_documento": {
            "type": "string",
            "enum": [
              "RUC",
              "DNI",
              "CE"
            ],
            "description": "Tipo de documento de identidad",
            "example": "RUC"
          },
          "ruc_identidad": {
            "type": [
              "string",
              "null"
            ],
            "example": "20123456789"
          },
          "email": {
            "type": [
              "string",
              "null"
            ],
            "example": "ventas@distribuidoraabc.com"
          },
          "telefono": {
            "type": [
              "string",
              "null"
            ],
            "example": "01-2345678"
          },
          "direccion": {
            "type": [
              "string",
              "null"
            ],
            "example": "Av. Industrial 456, Lima"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo",
            "example": true
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          }
        },
        "required": [
          "id",
          "nombre",
          "tipo_documento",
          "ruc_identidad",
          "email",
          "telefono",
          "direccion",
          "isActive",
          "tenant_id"
        ]
      },
      "CreateInventarioAjuste": {
        "type": "object",
        "properties": {
          "producto_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID del producto a ajustar",
            "example": 1
          },
          "tipo": {
            "type": "string",
            "enum": [
              "entrada",
              "salida"
            ],
            "description": "Tipo de ajuste: entrada (aumenta stock) o salida (reduce stock)",
            "example": "entrada"
          },
          "cantidad": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "description": "Cantidad a ajustar (máximo 3 decimales)",
            "example": 10.5
          },
          "motivo": {
            "type": "string",
            "minLength": 3,
            "maxLength": 500,
            "description": "Razón del ajuste de inventario",
            "example": "Corrección de inventario físico"
          }
        },
        "required": [
          "producto_id",
          "tipo",
          "cantidad",
          "motivo"
        ]
      },
      "InventarioAjuste": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único del ajuste",
            "example": 1
          },
          "producto_id": {
            "type": "integer",
            "example": 1
          },
          "tipo": {
            "type": "string",
            "enum": [
              "entrada",
              "salida"
            ],
            "example": "entrada"
          },
          "cantidad": {
            "type": "number",
            "example": 10.5
          },
          "motivo": {
            "type": "string",
            "example": "Corrección de inventario físico"
          },
          "usuario_id": {
            "type": [
              "integer",
              "null"
            ],
            "description": "ID del usuario que realizó el ajuste",
            "example": 1
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de creación del ajuste",
            "example": "2025-11-16T10:30:00Z"
          }
        },
        "required": [
          "id",
          "producto_id",
          "tipo",
          "cantidad",
          "motivo",
          "usuario_id",
          "tenant_id",
          "created_at"
        ]
      },
      "ListInventarioAjustesQuery": {
        "type": "object",
        "properties": {
          "producto_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "Filtrar por ID de producto",
            "example": 1
          },
          "tipo": {
            "type": "string",
            "enum": [
              "entrada",
              "salida"
            ],
            "description": "Filtrar por tipo de ajuste",
            "example": "entrada"
          },
          "fecha_inicio": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de inicio del rango (ISO 8601)",
            "example": "2025-11-01T00:00:00Z"
          },
          "fecha_fin": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de fin del rango (ISO 8601)",
            "example": "2025-11-30T23:59:59Z"
          }
        }
      },
      "CreateCaja": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50,
            "description": "Nombre de la caja registradora",
            "example": "Caja Principal"
          },
          "isActive": {
            "type": "boolean",
            "default": true,
            "description": "Estado activo/inactivo",
            "example": true
          }
        },
        "required": [
          "nombre"
        ]
      },
      "UpdateCaja": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50,
            "description": "Nombre de la caja registradora",
            "example": "Caja Principal"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo",
            "example": true
          }
        }
      },
      "Caja": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único de la caja",
            "example": 1
          },
          "nombre": {
            "type": "string",
            "example": "Caja Principal"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo",
            "example": true
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          }
        },
        "required": [
          "id",
          "nombre",
          "isActive",
          "tenant_id"
        ]
      },
      "ListCajasQuery": {
        "type": "object",
        "properties": {
          "includeInactive": {
            "type": "string",
            "description": "Incluir cajas inactivas (true/false)",
            "example": "false"
          }
        }
      },
      "CreateSerie": {
        "type": "object",
        "properties": {
          "codigo": {
            "type": "string",
            "minLength": 4,
            "maxLength": 4,
            "pattern": "^[A-Z0-9]{4}$",
            "description": "Código de serie SUNAT (ej: F001, B001)",
            "example": "F001"
          },
          "tipo_comprobante": {
            "type": "string",
            "enum": [
              "FACTURA",
              "BOLETA",
              "NOTA_VENTA"
            ],
            "description": "Tipo de comprobante para esta serie",
            "example": "FACTURA"
          },
          "caja_id": {
            "type": [
              "integer",
              "null"
            ],
            "exclusiveMinimum": 0,
            "description": "ID de la caja asignada a esta serie (opcional)",
            "example": 1
          },
          "isActive": {
            "type": "boolean",
            "default": true,
            "description": "Estado activo/inactivo",
            "example": true
          }
        },
        "required": [
          "codigo",
          "tipo_comprobante"
        ]
      },
      "UpdateSerie": {
        "type": "object",
        "properties": {
          "codigo": {
            "type": "string",
            "minLength": 4,
            "maxLength": 4,
            "pattern": "^[A-Z0-9]{4}$",
            "description": "Código de serie SUNAT",
            "example": "F001"
          },
          "tipo_comprobante": {
            "type": "string",
            "enum": [
              "FACTURA",
              "BOLETA",
              "NOTA_VENTA"
            ],
            "description": "Tipo de comprobante",
            "example": "FACTURA"
          },
          "caja_id": {
            "type": [
              "integer",
              "null"
            ],
            "exclusiveMinimum": 0,
            "description": "ID de la caja asignada",
            "example": 1
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo",
            "example": true
          }
        }
      },
      "Serie": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único de la serie",
            "example": 1
          },
          "codigo": {
            "type": "string",
            "description": "Código de serie SUNAT",
            "example": "F001"
          },
          "tipo_comprobante": {
            "type": "string",
            "enum": [
              "FACTURA",
              "BOLETA",
              "NOTA_VENTA"
            ],
            "description": "Tipo de comprobante",
            "example": "FACTURA"
          },
          "correlativo_actual": {
            "type": "integer",
            "description": "Número correlativo actual de la serie",
            "example": 157
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo",
            "example": true
          },
          "caja_id": {
            "type": [
              "integer",
              "null"
            ],
            "description": "ID de la caja asignada",
            "example": 1
          },
          "caja": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "id": {
                "type": "integer"
              },
              "nombre": {
                "type": "string"
              }
            },
            "required": [
              "id",
              "nombre"
            ],
            "description": "Información de la caja asignada"
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          }
        },
        "required": [
          "id",
          "codigo",
          "tipo_comprobante",
          "correlativo_actual",
          "isActive",
          "tenant_id"
        ]
      },
      "ListSeriesQuery": {
        "type": "object",
        "properties": {
          "tipo_comprobante": {
            "type": "string",
            "enum": [
              "FACTURA",
              "BOLETA",
              "NOTA_VENTA"
            ],
            "description": "Filtrar por tipo de comprobante",
            "example": "FACTURA"
          },
          "includeInactive": {
            "type": "string",
            "description": "Incluir series inactivas (true/false)",
            "example": "false"
          }
        }
      },
      "CreateVenta": {
        "type": "object",
        "properties": {
          "cliente_id": {
            "type": [
              "integer",
              "null"
            ],
            "exclusiveMinimum": 0,
            "description": "ID del cliente (opcional para venta al público)",
            "example": 1
          },
          "tipo_comprobante": {
            "type": "string",
            "enum": [
              "BOLETA",
              "FACTURA"
            ],
            "description": "Tipo de comprobante (si se proporciona, sobrescribe la detección automática)",
            "example": "BOLETA"
          },
          "metodo_pago": {
            "type": "string",
            "maxLength": 100,
            "description": "Método de pago utilizado",
            "example": "EFECTIVO"
          },
          "sesion_caja_id": {
            "type": [
              "integer",
              "null"
            ],
            "exclusiveMinimum": 0,
            "description": "ID de la sesión de caja asociada",
            "example": 1
          },
          "serie_id": {
            "type": [
              "integer",
              "null"
            ],
            "exclusiveMinimum": 0,
            "description": "ID de la serie de comprobante",
            "example": 1
          },
          "pedido_origen_id": {
            "type": [
              "integer",
              "null"
            ],
            "exclusiveMinimum": 0,
            "description": "ID del pedido que originó esta venta (si aplica)",
            "example": 1
          },
          "detalles": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "producto_id": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "description": "ID del producto a vender",
                  "example": 1
                },
                "cantidad": {
                  "anyOf": [
                    {
                      "type": "number"
                    },
                    {
                      "type": "string"
                    }
                  ],
                  "description": "Cantidad vendida (máximo 3 decimales)",
                  "example": 2.5
                },
                "precio_unitario": {
                  "anyOf": [
                    {
                      "type": "number"
                    },
                    {
                      "type": "string"
                    }
                  ],
                  "description": "Precio final CON IGV por unidad (máximo 2 decimales)",
                  "example": 25.5
                }
              },
              "required": [
                "producto_id",
                "cantidad",
                "precio_unitario"
              ]
            },
            "minItems": 1,
            "description": "Detalles de los productos vendidos"
          }
        },
        "required": [
          "detalles"
        ]
      },
      "UpdateVenta": {
        "type": "object",
        "properties": {
          "metodo_pago": {
            "type": "string",
            "maxLength": 100,
            "description": "Método de pago",
            "example": "TARJETA"
          }
        }
      },
      "Venta": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único de la venta",
            "example": 1
          },
          "total": {
            "type": "number",
            "description": "Total de la venta",
            "example": 63.75
          },
          "metodo_pago": {
            "type": [
              "string",
              "null"
            ],
            "description": "Método de pago utilizado",
            "example": "EFECTIVO"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha y hora de creación",
            "example": "2025-11-16T14:30:00Z"
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          },
          "cliente_id": {
            "type": [
              "integer",
              "null"
            ],
            "example": 1
          },
          "cliente": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "id": {
                "type": "integer"
              },
              "nombre": {
                "type": "string"
              },
              "documento_identidad": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "direccion": {
                "type": [
                  "string",
                  "null"
                ]
              }
            },
            "required": [
              "id",
              "nombre",
              "documento_identidad"
            ]
          },
          "usuario_id": {
            "type": [
              "integer",
              "null"
            ],
            "example": 1
          },
          "usuario": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "id": {
                "type": "integer"
              },
              "nombre": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "email": {
                "type": "string"
              }
            },
            "required": [
              "id",
              "nombre",
              "email"
            ]
          },
          "pedido_origen_id": {
            "type": [
              "integer",
              "null"
            ],
            "description": "ID del pedido que originó esta venta",
            "example": 1
          },
          "sesion_caja_id": {
            "type": [
              "integer",
              "null"
            ],
            "example": 1
          },
          "serie_id": {
            "type": [
              "integer",
              "null"
            ],
            "description": "ID de la serie de comprobante SUNAT",
            "example": 1
          },
          "serie": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "id": {
                "type": "integer"
              },
              "codigo": {
                "type": "string"
              },
              "tipo_comprobante": {
                "type": "string"
              },
              "correlativo_actual": {
                "type": "integer"
              }
            },
            "required": [
              "id",
              "codigo",
              "tipo_comprobante"
            ],
            "description": "Datos de la serie SUNAT (expandido)"
          },
          "numero_comprobante": {
            "type": [
              "integer",
              "null"
            ],
            "description": "Número correlativo del comprobante",
            "example": 123
          },
          "detalles": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer",
                  "example": 1
                },
                "producto_id": {
                  "type": "integer",
                  "example": 1
                },
                "producto": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "integer"
                    },
                    "nombre": {
                      "type": "string"
                    },
                    "sku": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "unidad_medida": {
                      "type": [
                        "object",
                        "null"
                      ],
                      "properties": {
                        "codigo": {
                          "type": "string"
                        },
                        "nombre": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "codigo",
                        "nombre"
                      ]
                    }
                  },
                  "required": [
                    "id",
                    "nombre",
                    "sku"
                  ]
                },
                "cantidad": {
                  "type": "number",
                  "description": "Cantidad vendida (soporta decimales)",
                  "example": 2.5
                },
                "valor_unitario": {
                  "type": "number",
                  "description": "Precio sin IGV (snapshot fiscal)",
                  "example": 21.61
                },
                "precio_unitario": {
                  "type": "number",
                  "description": "Precio con IGV (snapshot fiscal)",
                  "example": 25.5
                },
                "igv_total": {
                  "type": "number",
                  "description": "Monto de IGV de esta línea",
                  "example": 9.72
                },
                "tasa_igv": {
                  "type": "number",
                  "description": "Tasa de IGV aplicada (ej: 18.00)",
                  "example": 18
                },
                "tenant_id": {
                  "type": "integer",
                  "example": 1
                },
                "venta_id": {
                  "type": "integer",
                  "example": 1
                }
              },
              "required": [
                "id",
                "producto_id",
                "cantidad",
                "valor_unitario",
                "precio_unitario",
                "igv_total",
                "tasa_igv",
                "tenant_id",
                "venta_id"
              ]
            },
            "description": "Detalles de los productos vendidos"
          }
        },
        "required": [
          "id",
          "total",
          "metodo_pago",
          "created_at",
          "tenant_id",
          "cliente_id",
          "usuario_id",
          "pedido_origen_id",
          "sesion_caja_id",
          "serie_id",
          "numero_comprobante"
        ]
      },
      "ListVentasQuery": {
        "allOf": [
          {
            "$ref": "#/components/schemas/PaginationQuery"
          },
          {
            "type": "object",
            "properties": {
              "q": {
                "type": "string",
                "description": "Búsqueda por cliente o método de pago",
                "example": "Juan"
              },
              "cliente_id": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Filtrar por ID de cliente",
                "example": 1
              },
              "fecha_inicio": {
                "type": "string",
                "format": "date-time",
                "description": "Fecha de inicio del rango (ISO 8601)",
                "example": "2025-11-01T00:00:00Z"
              },
              "fecha_fin": {
                "type": "string",
                "format": "date-time",
                "description": "Fecha fin del rango (ISO 8601)",
                "example": "2025-11-30T23:59:59Z"
              }
            }
          }
        ]
      },
      "PaginatedVentaResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Venta"
            }
          },
          "meta": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de items",
                "example": 150
              },
              "page": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Página actual",
                "example": 1
              },
              "limit": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Items por página",
                "example": 10
              },
              "totalPages": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de páginas",
                "example": 15
              }
            },
            "required": [
              "total",
              "page",
              "limit",
              "totalPages"
            ]
          }
        },
        "required": [
          "data",
          "meta"
        ]
      },
      "CreateOrdenCompra": {
        "type": "object",
        "properties": {
          "proveedor_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID del proveedor (ahora obligatorio)",
            "example": 1
          },
          "tipo_comprobante": {
            "type": "string",
            "enum": [
              "FACTURA",
              "BOLETA",
              "GUIA"
            ],
            "description": "Tipo de comprobante (opcional en creación, obligatorio en recepción)",
            "example": "FACTURA"
          },
          "serie": {
            "type": "string",
            "maxLength": 10,
            "description": "Serie del comprobante del proveedor (opcional en creación)",
            "example": "F005"
          },
          "numero": {
            "type": "string",
            "maxLength": 20,
            "description": "Número del comprobante del proveedor (opcional en creación)",
            "example": "000345"
          },
          "fecha_emision": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de emisión del comprobante",
            "example": "2025-11-21T10:30:00Z"
          },
          "detalles": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "producto_id": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "description": "ID del producto a comprar",
                  "example": 1
                },
                "cantidad": {
                  "anyOf": [
                    {
                      "type": "number"
                    },
                    {
                      "type": "string"
                    }
                  ],
                  "description": "Cantidad a ordenar (máximo 3 decimales)",
                  "example": 50
                },
                "costo_unitario": {
                  "anyOf": [
                    {
                      "type": "number"
                    },
                    {
                      "type": "string"
                    }
                  ],
                  "description": "Costo unitario CON IGV incluido (máximo 2 decimales)",
                  "example": 23.6
                }
              },
              "required": [
                "producto_id",
                "cantidad",
                "costo_unitario"
              ]
            },
            "minItems": 1,
            "description": "Detalles de los productos a ordenar (costos con IGV incluido)"
          }
        },
        "required": [
          "proveedor_id",
          "detalles"
        ]
      },
      "UpdateOrdenCompra": {
        "type": "object",
        "properties": {
          "proveedor_id": {
            "type": [
              "integer",
              "null"
            ],
            "exclusiveMinimum": 0,
            "description": "ID del proveedor (opcional)",
            "example": 1
          },
          "estado": {
            "type": "string",
            "enum": [
              "pendiente",
              "recibida",
              "cancelada"
            ],
            "description": "Estado de la orden",
            "example": "pendiente"
          }
        }
      },
      "RecibirOrdenCompra": {
        "type": "object",
        "properties": {
          "serie": {
            "type": "string",
            "minLength": 1,
            "maxLength": 10,
            "description": "Serie del comprobante del proveedor",
            "example": "F005"
          },
          "numero": {
            "type": "string",
            "minLength": 1,
            "maxLength": 20,
            "description": "Número del comprobante del proveedor",
            "example": "000345"
          },
          "fecha_recepcion": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de recepción (si no se proporciona, usa fecha actual)",
            "example": "2025-11-21T10:30:00Z"
          }
        },
        "required": [
          "serie",
          "numero"
        ]
      },
      "OrdenCompra": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único de la orden de compra",
            "example": 1
          },
          "total": {
            "type": [
              "number",
              "null"
            ],
            "description": "Total de la orden CON IGV",
            "example": 1180
          },
          "subtotal_base": {
            "type": [
              "number",
              "null"
            ],
            "description": "Subtotal SIN IGV",
            "example": 1000
          },
          "impuesto_igv": {
            "type": [
              "number",
              "null"
            ],
            "description": "Monto total de IGV",
            "example": 180
          },
          "tipo_comprobante": {
            "type": [
              "string",
              "null"
            ],
            "description": "Tipo de comprobante",
            "example": "FACTURA"
          },
          "serie": {
            "type": [
              "string",
              "null"
            ],
            "description": "Serie del comprobante",
            "example": "F005"
          },
          "numero": {
            "type": [
              "string",
              "null"
            ],
            "description": "Número del comprobante",
            "example": "000345"
          },
          "fecha_emision": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time",
            "description": "Fecha de emisión del comprobante",
            "example": "2025-11-21T10:30:00Z"
          },
          "proveedor_ruc": {
            "type": [
              "string",
              "null"
            ],
            "description": "RUC del proveedor (snapshot)",
            "example": "20123456789"
          },
          "estado": {
            "type": "string",
            "enum": [
              "pendiente",
              "recibida",
              "cancelada"
            ],
            "description": "Estado de la orden",
            "example": "pendiente"
          },
          "fecha_creacion": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de creación de la orden",
            "example": "2025-11-16T10:30:00Z"
          },
          "fecha_recepcion": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time",
            "description": "Fecha en que se recibió la mercadería",
            "example": "2025-11-17T14:00:00Z"
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          },
          "proveedor_id": {
            "type": [
              "integer",
              "null"
            ],
            "example": 1
          },
          "proveedor": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "id": {
                "type": "integer"
              },
              "nombre": {
                "type": "string"
              },
              "ruc_identidad": {
                "type": "string"
              },
              "tipo_documento": {
                "type": "string"
              }
            },
            "required": [
              "id",
              "nombre",
              "ruc_identidad",
              "tipo_documento"
            ]
          },
          "usuario_id": {
            "type": [
              "integer",
              "null"
            ],
            "description": "Usuario que creó la orden",
            "example": 1
          },
          "usuario": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "id": {
                "type": "integer"
              },
              "nombre": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "email": {
                "type": "string"
              }
            },
            "required": [
              "id",
              "nombre",
              "email"
            ]
          },
          "detalles": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer",
                  "example": 1
                },
                "cantidad": {
                  "type": "number",
                  "description": "Cantidad ordenada (soporta decimales)",
                  "example": 50
                },
                "costo_unitario": {
                  "type": "number",
                  "example": 15.5
                },
                "tenant_id": {
                  "type": "integer",
                  "example": 1
                },
                "orden_compra_id": {
                  "type": "integer",
                  "example": 1
                },
                "producto_id": {
                  "type": "integer",
                  "example": 1
                },
                "producto": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "integer"
                    },
                    "nombre": {
                      "type": "string"
                    },
                    "sku": {
                      "type": [
                        "string",
                        "null"
                      ]
                    }
                  },
                  "required": [
                    "id",
                    "nombre",
                    "sku"
                  ]
                }
              },
              "required": [
                "id",
                "cantidad",
                "costo_unitario",
                "tenant_id",
                "orden_compra_id",
                "producto_id"
              ]
            },
            "description": "Detalles de los productos ordenados"
          }
        },
        "required": [
          "id",
          "total",
          "subtotal_base",
          "impuesto_igv",
          "tipo_comprobante",
          "serie",
          "numero",
          "fecha_emision",
          "proveedor_ruc",
          "estado",
          "fecha_creacion",
          "fecha_recepcion",
          "tenant_id",
          "proveedor_id",
          "usuario_id"
        ]
      },
      "ListOrdenesCompraQuery": {
        "type": "object",
        "properties": {
          "proveedor_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "Filtrar por ID de proveedor",
            "example": 1
          },
          "estado": {
            "type": "string",
            "enum": [
              "pendiente",
              "recibida",
              "cancelada"
            ],
            "description": "Filtrar por estado de orden",
            "example": "pendiente"
          },
          "fecha_inicio": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de inicio del rango (ISO 8601)",
            "example": "2025-11-01T00:00:00Z"
          },
          "fecha_fin": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de fin del rango (ISO 8601)",
            "example": "2025-11-30T23:59:59Z"
          }
        }
      },
      "CreatePedido": {
        "type": "object",
        "properties": {
          "cliente_id": {
            "type": [
              "integer",
              "null"
            ],
            "exclusiveMinimum": 0,
            "description": "ID del cliente (opcional)",
            "example": 1
          },
          "tipo_recojo": {
            "type": "string",
            "enum": [
              "tienda",
              "envio"
            ],
            "description": "Tipo de recojo: tienda o envío",
            "example": "tienda"
          },
          "detalles": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "producto_id": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "description": "ID del producto a pedir",
                  "example": 1
                },
                "cantidad": {
                  "anyOf": [
                    {
                      "type": "number"
                    },
                    {
                      "type": "string"
                    }
                  ],
                  "description": "Cantidad solicitada (máximo 3 decimales)",
                  "example": 3
                }
              },
              "required": [
                "producto_id",
                "cantidad"
              ]
            },
            "minItems": 1,
            "description": "Detalles de los productos del pedido"
          }
        },
        "required": [
          "tipo_recojo",
          "detalles"
        ]
      },
      "ListPedidosQuery": {
        "type": "object",
        "properties": {
          "estado": {
            "type": "string",
            "enum": [
              "pendiente",
              "confirmado",
              "cancelado",
              "entregado"
            ],
            "description": "Filtrar por estado del pedido",
            "example": "pendiente"
          }
        }
      },
      "ConfirmarPedido": {
        "type": "object",
        "properties": {
          "mensaje": {
            "type": "string",
            "maxLength": 500,
            "description": "Mensaje opcional para el cliente",
            "example": "Tu pedido ha sido confirmado y estará listo en 2 horas"
          }
        }
      },
      "CancelarPedido": {
        "type": "object",
        "properties": {
          "razon": {
            "type": "string",
            "minLength": 3,
            "maxLength": 500,
            "description": "Razón de la cancelación del pedido",
            "example": "Producto agotado"
          }
        },
        "required": [
          "razon"
        ]
      },
      "GenerarVenta": {
        "type": "object",
        "properties": {
          "metodo_pago": {
            "type": "string",
            "maxLength": 100,
            "description": "Método de pago utilizado",
            "example": "EFECTIVO"
          }
        }
      },
      "Pedido": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único del pedido",
            "example": 1
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de creación del pedido",
            "example": "2025-11-16T10:30:00Z"
          },
          "estado": {
            "type": "string",
            "enum": [
              "pendiente",
              "confirmado",
              "cancelado",
              "entregado"
            ],
            "description": "Estado del pedido",
            "example": "pendiente"
          },
          "tipo_recojo": {
            "type": "string",
            "enum": [
              "tienda",
              "envio"
            ],
            "description": "Tipo de entrega: tienda o envío",
            "example": "tienda"
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          },
          "cliente_id": {
            "type": [
              "integer",
              "null"
            ],
            "description": "ID del cliente (opcional)",
            "example": 1
          },
          "cliente": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "id": {
                "type": "integer"
              },
              "nombre": {
                "type": "string"
              },
              "telefono": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "documento_identidad": {
                "type": [
                  "string",
                  "null"
                ]
              }
            },
            "required": [
              "id",
              "nombre",
              "telefono",
              "documento_identidad"
            ]
          },
          "usuario_gestion_id": {
            "type": [
              "integer",
              "null"
            ],
            "description": "ID del usuario que gestionó el pedido",
            "example": 1
          },
          "usuario_gestion": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "id": {
                "type": "integer"
              },
              "nombre": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "email": {
                "type": "string"
              }
            },
            "required": [
              "id",
              "nombre",
              "email"
            ]
          },
          "detalles": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer",
                  "example": 1
                },
                "cantidad": {
                  "type": "number",
                  "description": "Cantidad solicitada (soporta decimales)",
                  "example": 3
                },
                "tenant_id": {
                  "type": "integer",
                  "example": 1
                },
                "pedido_id": {
                  "type": "integer",
                  "example": 1
                },
                "producto_id": {
                  "type": "integer",
                  "example": 1
                },
                "producto": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "integer"
                    },
                    "nombre": {
                      "type": "string"
                    },
                    "sku": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "precio_base": {
                      "type": "number"
                    },
                    "afectacion_igv": {
                      "type": "string",
                      "enum": [
                        "GRAVADO",
                        "EXONERADO",
                        "INAFECTO"
                      ]
                    }
                  },
                  "required": [
                    "id",
                    "nombre",
                    "sku",
                    "precio_base",
                    "afectacion_igv"
                  ]
                }
              },
              "required": [
                "id",
                "cantidad",
                "tenant_id",
                "pedido_id",
                "producto_id"
              ]
            },
            "description": "Detalles de los productos del pedido"
          }
        },
        "required": [
          "id",
          "created_at",
          "estado",
          "tipo_recojo",
          "tenant_id",
          "cliente_id",
          "usuario_gestion_id"
        ]
      },
      "GenerarVentaResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Mensaje de confirmación",
            "example": "Venta generada exitosamente desde el pedido"
          },
          "venta_id": {
            "type": "integer",
            "description": "ID de la venta generada",
            "example": 1
          },
          "pedido_id": {
            "type": "integer",
            "description": "ID del pedido procesado",
            "example": 1
          }
        },
        "required": [
          "message",
          "venta_id",
          "pedido_id"
        ]
      },
      "AperturaSesionCaja": {
        "type": "object",
        "properties": {
          "caja_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID de la caja registradora",
            "example": 1
          },
          "monto_inicial": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "description": "Monto inicial en efectivo al abrir la caja (máximo 2 decimales)",
            "example": 100
          }
        },
        "required": [
          "caja_id",
          "monto_inicial"
        ]
      },
      "CierreSesionCaja": {
        "type": "object",
        "properties": {
          "monto_final": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "description": "Monto final en efectivo al cerrar (arqueo, máximo 2 decimales)",
            "example": 450
          }
        },
        "required": [
          "monto_final"
        ]
      },
      "CierreAdministrativo": {
        "type": "object",
        "properties": {
          "monto_final": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "description": "Monto contado físicamente en la caja al momento del cierre forzoso",
            "example": 450
          },
          "motivo": {
            "type": "string",
            "minLength": 10,
            "description": "Razón por la cual se realiza el cierre administrativo",
            "example": "Usuario no cerró su turno. Supervisor contó el efectivo y realizó arqueo."
          }
        },
        "required": [
          "monto_final",
          "motivo"
        ]
      },
      "SesionCaja": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único de la sesión",
            "example": 1
          },
          "fecha_apertura": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha y hora de apertura",
            "example": "2025-11-16T08:00:00Z"
          },
          "fecha_cierre": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time",
            "description": "Fecha y hora de cierre",
            "example": "2025-11-16T18:00:00Z"
          },
          "monto_inicial": {
            "type": "number",
            "description": "Monto inicial",
            "example": 100
          },
          "monto_final": {
            "type": [
              "number",
              "null"
            ],
            "description": "Monto final (arqueo)",
            "example": 450
          },
          "total_ventas": {
            "type": [
              "number",
              "null"
            ],
            "description": "Total de ventas en la sesión",
            "example": 380
          },
          "total_egresos": {
            "type": [
              "number",
              "null"
            ],
            "description": "Total de egresos",
            "example": 30
          },
          "diferencia": {
            "type": [
              "number",
              "null"
            ],
            "description": "Diferencia entre esperado y arqueo",
            "example": 0
          },
          "estado": {
            "type": "string",
            "enum": [
              "ABIERTA",
              "CERRADA"
            ],
            "description": "Estado de la sesión",
            "example": "ABIERTA"
          },
          "caja_id": {
            "type": "integer",
            "example": 1
          },
          "caja": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer"
              },
              "nombre": {
                "type": "string"
              }
            },
            "required": [
              "id",
              "nombre"
            ]
          },
          "usuario_id": {
            "type": "integer",
            "example": 1
          },
          "usuario": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer"
              },
              "nombre": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "email": {
                "type": "string"
              }
            },
            "required": [
              "id",
              "nombre",
              "email"
            ]
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          }
        },
        "required": [
          "id",
          "fecha_apertura",
          "fecha_cierre",
          "monto_inicial",
          "monto_final",
          "total_ventas",
          "total_egresos",
          "diferencia",
          "estado",
          "caja_id",
          "usuario_id",
          "tenant_id"
        ]
      },
      "SesionActivaResponse": {
        "type": "object",
        "properties": {
          "sesion": {
            "allOf": [
              {
                "$ref": "#/components/schemas/SesionCaja"
              },
              {
                "type": [
                  "object",
                  "null"
                ],
                "description": "Sesión activa del usuario (null si no hay ninguna)"
              }
            ]
          },
          "tiene_sesion_activa": {
            "type": "boolean",
            "description": "Indica si el usuario tiene una sesión activa",
            "example": true
          }
        },
        "required": [
          "sesion",
          "tiene_sesion_activa"
        ]
      },
      "HistorialSesionesQuery": {
        "type": "object",
        "properties": {
          "caja_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "Filtrar por ID de caja",
            "example": 1
          },
          "usuario_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "Filtrar por ID de usuario",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "default": 50,
            "description": "Límite de resultados",
            "example": 50
          }
        }
      },
      "CreateMovimientoCaja": {
        "type": "object",
        "properties": {
          "tipo": {
            "type": "string",
            "enum": [
              "INGRESO",
              "EGRESO"
            ],
            "description": "Tipo de movimiento",
            "example": "INGRESO"
          },
          "monto": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "description": "Monto del movimiento (máximo 2 decimales)",
            "example": 50
          },
          "descripcion": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "description": "Descripción del movimiento",
            "example": "Pago de luz"
          }
        },
        "required": [
          "tipo",
          "monto",
          "descripcion"
        ]
      },
      "MovimientoCaja": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único del movimiento",
            "example": 1
          },
          "tipo": {
            "type": "string",
            "enum": [
              "INGRESO",
              "EGRESO"
            ],
            "description": "Tipo de movimiento",
            "example": "INGRESO"
          },
          "monto": {
            "type": "number",
            "description": "Monto del movimiento",
            "example": 50
          },
          "descripcion": {
            "type": "string",
            "description": "Descripción del movimiento",
            "example": "Pago de luz"
          },
          "fecha": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha del movimiento",
            "example": "2025-11-16T14:30:00Z"
          },
          "sesion_caja_id": {
            "type": "integer",
            "description": "ID de la sesión de caja",
            "example": 1
          },
          "sesion_caja": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer"
              },
              "caja": {
                "type": "object",
                "properties": {
                  "nombre": {
                    "type": "string"
                  }
                },
                "required": [
                  "nombre"
                ]
              }
            },
            "required": [
              "id",
              "caja"
            ]
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          }
        },
        "required": [
          "id",
          "tipo",
          "monto",
          "descripcion",
          "fecha",
          "sesion_caja_id",
          "tenant_id"
        ]
      },
      "CreateUsuario": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email del usuario",
            "example": "empleado@empresa.com"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "description": "Contraseña del usuario (mínimo 8 caracteres)",
            "example": "password123"
          },
          "nombre": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "description": "Nombre completo del usuario",
            "example": "Juan Pérez"
          },
          "rol": {
            "type": "string",
            "enum": [
              "admin",
              "empleado"
            ],
            "default": "empleado",
            "description": "Rol del usuario en el sistema",
            "example": "empleado"
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "UpdateUsuario": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email del usuario",
            "example": "empleado@empresa.com"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "description": "Nueva contraseña del usuario (mínimo 8 caracteres)",
            "example": "newpassword123"
          },
          "nombre": {
            "type": "string",
            "maxLength": 255,
            "description": "Nombre completo del usuario",
            "example": "Juan Pérez Actualizado"
          },
          "rol": {
            "type": "string",
            "enum": [
              "admin",
              "empleado"
            ],
            "description": "Rol del usuario",
            "example": "admin"
          },
          "isActive": {
            "type": "boolean",
            "description": "Estado activo/inactivo (para borrado lógico)",
            "example": true
          }
        }
      },
      "Usuario": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID único del usuario",
            "example": 1
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email del usuario",
            "example": "empleado@empresa.com"
          },
          "nombre": {
            "type": [
              "string",
              "null"
            ],
            "description": "Nombre completo del usuario",
            "example": "Juan Pérez"
          },
          "rol": {
            "type": "string",
            "enum": [
              "admin",
              "empleado"
            ],
            "description": "Rol del usuario (admin, empleado)",
            "example": "empleado"
          },
          "isActive": {
            "type": "boolean",
            "description": "Indica si el usuario está activo",
            "example": true
          },
          "tenant_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID del tenant al que pertenece",
            "example": 1
          }
        },
        "required": [
          "id",
          "email",
          "nombre",
          "rol",
          "isActive",
          "tenant_id"
        ]
      },
      "UsuariosPaginated": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Usuario"
            }
          },
          "meta": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de items",
                "example": 150
              },
              "page": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Página actual",
                "example": 1
              },
              "limit": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "Items por página",
                "example": 10
              },
              "totalPages": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de páginas",
                "example": 15
              }
            },
            "required": [
              "total",
              "page",
              "limit",
              "totalPages"
            ]
          }
        },
        "required": [
          "data",
          "meta"
        ]
      },
      "TenantConfiguracion": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "ID único del tenant",
            "example": 1
          },
          "nombre_empresa": {
            "type": "string",
            "description": "Nombre de la empresa",
            "example": "Ferretería El Constructor"
          },
          "subdominio": {
            "type": "string",
            "description": "Subdominio único del tenant",
            "example": "ferreteria-constructor"
          },
          "isActive": {
            "type": "boolean",
            "description": "Indica si el tenant está activo",
            "example": true
          },
          "configuracion": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "pedidos": {
                "type": "object",
                "properties": {
                  "dias_limite_reserva": {
                    "type": "integer",
                    "description": "Días límite para reservar stock en pedidos",
                    "example": 7
                  }
                },
                "required": [
                  "dias_limite_reserva"
                ]
              },
              "emails": {
                "type": "object",
                "properties": {
                  "remitente": {
                    "type": "string",
                    "format": "email",
                    "description": "Email remitente para notificaciones",
                    "example": "ventas@ferreteria.com"
                  },
                  "plantilla_confirmacion": {
                    "type": "string",
                    "description": "Plantilla de email para confirmación"
                  },
                  "plantilla_cancelacion": {
                    "type": "string",
                    "description": "Plantilla de email para cancelación"
                  }
                }
              },
              "facturacion": {
                "type": "object",
                "properties": {
                  "impuesto_nombre": {
                    "type": "string",
                    "description": "Nombre del impuesto aplicable",
                    "example": "IGV"
                  },
                  "tasa_impuesto": {
                    "type": "number",
                    "description": "Tasa de impuesto en porcentaje",
                    "example": 18
                  },
                  "es_agente_retencion": {
                    "type": "boolean",
                    "description": "Indica si es agente de retención",
                    "example": false
                  },
                  "exonerado_regional": {
                    "type": "boolean",
                    "description": "Indica si tiene exoneración regional",
                    "example": false
                  }
                },
                "required": [
                  "impuesto_nombre",
                  "tasa_impuesto",
                  "es_agente_retencion",
                  "exonerado_regional"
                ]
              }
            },
            "description": "Configuración general del tenant (pedidos, emails, facturación)"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de creación",
            "example": "2024-01-15T10:30:00Z"
          }
        },
        "required": [
          "id",
          "nombre_empresa",
          "subdominio",
          "isActive",
          "configuracion",
          "created_at"
        ]
      },
      "UpdateTenantConfiguracion": {
        "type": "object",
        "properties": {
          "pedidos": {
            "type": "object",
            "properties": {
              "dias_limite_reserva": {
                "type": "integer",
                "minimum": 1,
                "maximum": 30,
                "description": "Días límite para reservar stock",
                "example": 7
              }
            }
          },
          "emails": {
            "type": "object",
            "properties": {
              "remitente": {
                "type": "string",
                "format": "email",
                "description": "Email remitente",
                "example": "ventas@ferreteria.com"
              },
              "plantilla_confirmacion": {
                "type": "string",
                "description": "Plantilla de confirmación"
              },
              "plantilla_cancelacion": {
                "type": "string",
                "description": "Plantilla de cancelación"
              }
            }
          },
          "facturacion": {
            "type": "object",
            "properties": {
              "impuesto_nombre": {
                "type": "string",
                "description": "Nombre del impuesto",
                "example": "IGV"
              },
              "tasa_impuesto": {
                "type": "number",
                "minimum": 0,
                "maximum": 100,
                "description": "Tasa de impuesto (%)",
                "example": 18
              },
              "es_agente_retencion": {
                "type": "boolean",
                "description": "Es agente de retención",
                "example": false
              },
              "exonerado_regional": {
                "type": "boolean",
                "description": "Exoneración regional",
                "example": false
              }
            }
          }
        },
        "additionalProperties": {}
      },
      "TenantConfigFiscal": {
        "type": "object",
        "properties": {
          "impuesto_nombre": {
            "type": "string",
            "description": "Nombre del impuesto aplicable",
            "example": "IGV"
          },
          "tasa_impuesto": {
            "type": "number",
            "description": "Tasa de impuesto en porcentaje",
            "example": 18
          },
          "es_agente_retencion": {
            "type": "boolean",
            "description": "Indica si es agente de retención SUNAT",
            "example": false
          },
          "exonerado_regional": {
            "type": "boolean",
            "description": "Indica si tiene exoneración regional",
            "example": false
          }
        },
        "required": [
          "impuesto_nombre",
          "tasa_impuesto",
          "es_agente_retencion",
          "exonerado_regional"
        ]
      },
      "UpdateTenantConfigFiscal": {
        "type": "object",
        "properties": {
          "impuesto_nombre": {
            "type": "string",
            "description": "Nombre del impuesto",
            "example": "IGV"
          },
          "tasa_impuesto": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "description": "Tasa de impuesto (%)",
            "example": 18
          },
          "es_agente_retencion": {
            "type": "boolean",
            "description": "Es agente de retención",
            "example": false
          },
          "exonerado_regional": {
            "type": "boolean",
            "description": "Exoneración regional",
            "example": false
          }
        }
      },
      "KardexCompleto": {
        "type": "object",
        "properties": {
          "producto": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "description": "ID del producto",
                "example": 1
              },
              "nombre": {
                "type": "string",
                "description": "Nombre del producto",
                "example": "Cemento Portland Tipo I"
              },
              "sku": {
                "type": [
                  "string",
                  "null"
                ],
                "description": "SKU del producto (puede ser null si no está asignado)",
                "example": "CEM-PORT-001"
              },
              "stock": {
                "type": "number",
                "description": "Stock actual del producto",
                "example": 50
              }
            },
            "required": [
              "id",
              "nombre",
              "sku",
              "stock"
            ],
            "description": "Información básica del producto"
          },
          "stockActual": {
            "type": "number",
            "description": "Stock actual del producto",
            "example": 50
          },
          "totalMovimientos": {
            "type": "integer",
            "description": "Cantidad total de movimientos registrados",
            "example": 12
          },
          "movimientos": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "fecha": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Fecha del movimiento",
                  "example": "2024-01-15T10:30:00Z"
                },
                "tipo": {
                  "type": "string",
                  "enum": [
                    "venta",
                    "compra",
                    "ajuste_entrada",
                    "ajuste_salida"
                  ],
                  "description": "Tipo de movimiento que afecta el stock",
                  "example": "venta"
                },
                "cantidad": {
                  "type": "number",
                  "description": "Cantidad de producto en el movimiento",
                  "example": 5
                },
                "referencia": {
                  "type": "string",
                  "description": "Referencia fiscal del movimiento (serie-número del comprobante)",
                  "example": "B001-000045"
                },
                "tercero": {
                  "type": "string",
                  "description": "Nombre del cliente o proveedor",
                  "example": "Juan Pérez García"
                },
                "tercero_documento": {
                  "type": "string",
                  "description": "Número de documento (RUC/DNI) del cliente o proveedor",
                  "example": "20123456789"
                },
                "motivo": {
                  "type": "string",
                  "description": "Motivo del movimiento (solo para ajustes)",
                  "example": "Producto dañado"
                },
                "responsable": {
                  "type": "string",
                  "description": "Usuario responsable del movimiento (solo para ajustes)",
                  "example": "admin@empresa.com"
                },
                "precio_unitario": {
                  "type": "number",
                  "description": "Precio o costo unitario del movimiento",
                  "example": 25.5
                },
                "saldo": {
                  "type": "number",
                  "description": "Stock acumulado después del movimiento",
                  "example": 45
                }
              },
              "required": [
                "fecha",
                "tipo",
                "cantidad",
                "referencia",
                "saldo"
              ]
            },
            "description": "Lista de movimientos ordenados cronológicamente (del más antiguo al más reciente)"
          }
        },
        "required": [
          "producto",
          "stockActual",
          "totalMovimientos",
          "movimientos"
        ]
      },
      "AuditoriaLog": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único del log de auditoría",
            "example": 1
          },
          "fecha": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha y hora del evento",
            "example": "2024-01-15T10:30:00Z"
          },
          "usuario_id": {
            "type": "integer",
            "description": "ID del usuario que realizó la acción",
            "example": 1
          },
          "usuario": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "description": "ID del usuario",
                "example": 1
              },
              "nombre": {
                "type": [
                  "string",
                  "null"
                ],
                "description": "Nombre del usuario",
                "example": "Juan Pérez"
              },
              "email": {
                "type": "string",
                "format": "email",
                "description": "Email del usuario",
                "example": "juan@empresa.com"
              }
            },
            "required": [
              "id",
              "nombre",
              "email"
            ],
            "description": "Usuario que realizó la acción"
          },
          "accion": {
            "type": "string",
            "enum": [
              "CREAR",
              "ACTUALIZAR",
              "ELIMINAR",
              "ANULAR",
              "AJUSTAR",
              "LOGIN",
              "LOGOUT"
            ],
            "description": "Tipo de acción realizada",
            "example": "CREAR"
          },
          "tabla_afectada": {
            "type": "string",
            "description": "Tabla afectada por la acción",
            "example": "Productos"
          },
          "registro_id": {
            "type": [
              "integer",
              "null"
            ],
            "description": "ID del registro afectado",
            "example": 123
          },
          "datos_antes": {
            "description": "Estado anterior del registro (JSON)",
            "example": {
              "nombre": "Producto Viejo",
              "precio": 10.5
            }
          },
          "datos_despues": {
            "description": "Estado posterior del registro (JSON)",
            "example": {
              "nombre": "Producto Nuevo",
              "precio": 12
            }
          },
          "ip_address": {
            "type": [
              "string",
              "null"
            ],
            "description": "Dirección IP del cliente",
            "example": "192.168.1.100"
          },
          "user_agent": {
            "type": [
              "string",
              "null"
            ],
            "description": "User agent del navegador",
            "example": "Mozilla/5.0..."
          },
          "tenant_id": {
            "type": "integer",
            "example": 1
          }
        },
        "required": [
          "id",
          "fecha",
          "usuario_id",
          "accion",
          "tabla_afectada",
          "registro_id",
          "ip_address",
          "user_agent",
          "tenant_id"
        ]
      },
      "AuditoriaList": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "description": "Cantidad total de logs",
            "example": 25
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AuditoriaLog"
            },
            "description": "Lista de logs de auditoría"
          }
        },
        "required": [
          "total",
          "data"
        ]
      },
      "EstadisticasAuditoria": {
        "type": "object",
        "properties": {
          "periodo": {
            "type": "object",
            "properties": {
              "desde": {
                "type": "string",
                "format": "date-time",
                "description": "Fecha de inicio del periodo",
                "example": "2024-01-08T00:00:00Z"
              },
              "hasta": {
                "type": "string",
                "format": "date-time",
                "description": "Fecha de fin del periodo",
                "example": "2024-01-15T23:59:59Z"
              }
            },
            "required": [
              "desde",
              "hasta"
            ],
            "description": "Periodo de las estadísticas"
          },
          "total_eventos": {
            "type": "integer",
            "description": "Total de eventos en el periodo",
            "example": 150
          },
          "por_accion": {
            "type": "object",
            "additionalProperties": {
              "type": "integer"
            },
            "description": "Cantidad de eventos agrupados por tipo de acción",
            "example": {
              "CREAR": 50,
              "ACTUALIZAR": 70,
              "ELIMINAR": 15,
              "LOGIN": 15
            }
          },
          "por_tabla": {
            "type": "object",
            "additionalProperties": {
              "type": "integer"
            },
            "description": "Cantidad de eventos agrupados por tabla afectada",
            "example": {
              "productos": 60,
              "ventas": 40,
              "clientes": 25,
              "usuarios": 25
            }
          },
          "usuarios_mas_activos": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "usuario_id": {
                  "type": "integer",
                  "description": "ID del usuario",
                  "example": 1
                },
                "nombre": {
                  "type": "string",
                  "description": "Nombre del usuario",
                  "example": "Juan Pérez"
                },
                "email": {
                  "type": "string",
                  "format": "email",
                  "description": "Email del usuario",
                  "example": "juan@empresa.com"
                },
                "count": {
                  "type": "integer",
                  "description": "Cantidad de acciones realizadas",
                  "example": 45
                }
              },
              "required": [
                "usuario_id",
                "nombre",
                "email",
                "count"
              ]
            },
            "description": "Top 10 usuarios más activos en el periodo"
          }
        },
        "required": [
          "periodo",
          "total_eventos",
          "por_accion",
          "por_tabla",
          "usuarios_mas_activos"
        ]
      },
      "ListAuditoriaQuery": {
        "type": "object",
        "properties": {
          "usuario_id": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "Filtrar por ID de usuario",
            "example": 1
          },
          "accion": {
            "type": "string",
            "enum": [
              "CREAR",
              "ACTUALIZAR",
              "ELIMINAR",
              "ANULAR",
              "AJUSTAR",
              "LOGIN",
              "LOGOUT"
            ],
            "description": "Filtrar por tipo de acción",
            "example": "CREAR"
          },
          "tabla_afectada": {
            "type": "string",
            "description": "Filtrar por tabla afectada",
            "example": "Productos"
          },
          "fecha_inicio": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de inicio del rango (ISO 8601)",
            "example": "2025-11-01T00:00:00Z"
          },
          "fecha_fin": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de fin del rango (ISO 8601)",
            "example": "2025-11-30T23:59:59Z"
          },
          "limit": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "description": "Límite de resultados",
            "example": 100
          }
        }
      }
    },
    "parameters": {}
  },
  "paths": {
    "/api/auth/register": {
      "post": {
        "tags": [
          "Autenticación"
        ],
        "summary": "Registrar nuevo tenant",
        "description": "Crea un nuevo tenant (empresa) con usuario administrador. Genera automáticamente 12 unidades de medida SUNAT. El tenant queda en estado isActive: false hasta su verificación.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterTenant"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tenant creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/verify": {
      "post": {
        "tags": [
          "Autenticación"
        ],
        "summary": "Verificar y activar tenant (Desarrollo)",
        "description": "En modo desarrollo (TENANT_ACTIVATION_MODE=manual), activa un tenant manualmente. En producción, la activación es automática vía email.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyTenant"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tenant activado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": [
          "Autenticación"
        ],
        "summary": "Iniciar sesión",
        "description": "Autentica un usuario y retorna un token JWT. Requiere que el request incluya el subdominio del tenant en el hostname. El token incluye: usuario_id, tenant_id, y rol.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Login"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login exitoso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/public/catalogo": {
      "get": {
        "tags": [
          "Público - Catálogo"
        ],
        "summary": "Obtener catálogo de productos públicos",
        "description": "Endpoint público para listar productos disponibles en la tienda web.\n  \n**Características:**\n- No requiere autenticación (sin JWT)\n- Solo expone datos seguros (precios, stock, imágenes)\n- NO expone datos sensibles (costos, proveedores)\n- Solo productos activos (isActive: true)\n- Máximo 100 productos por request",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Término de búsqueda (nombre, SKU)",
              "example": "martillo"
            },
            "required": false,
            "description": "Término de búsqueda (nombre, SKU)",
            "name": "q",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filtrar por ID de categoría",
              "example": "5"
            },
            "required": false,
            "description": "Filtrar por ID de categoría",
            "name": "categoria_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filtrar por ID de marca",
              "example": "3"
            },
            "required": false,
            "description": "Filtrar por ID de marca",
            "name": "marca_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Número máximo de productos a devolver (default: 50, max: 100)",
              "example": "20"
            },
            "required": false,
            "description": "Número máximo de productos a devolver (default: 50, max: 100)",
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de productos del catálogo público",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ProductoCatalogoPublico"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Tenant no identificado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Tenant no identificado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/public/checkout": {
      "post": {
        "tags": [
          "Público - Checkout"
        ],
        "summary": "Crear pedido desde tienda web (Guest Checkout)",
        "description": "Endpoint público para crear pedidos sin autenticación.\n\n**Flujo:**\n1. **Gestión de cliente:** Busca cliente por DNI o Email\n   - Si existe: Actualiza datos y usa ese ID\n   - Si NO existe: Crea nuevo cliente automáticamente\n2. **Validación:** Verifica stock disponible de productos\n3. **Creación:** Guarda pedido con estado \"pendiente\"\n4. **Notificación:** TODO - Enviar email de confirmación\n\n**Datos sensibles:**\n- Este endpoint NO expone costos de compra ni proveedores\n- Solo trabaja con precios de venta y stock público",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePedidoPublico"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Pedido creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PedidoPublicoResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos o tenant no identificado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Producto no encontrado o no disponible",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Producto con ID 5 no encontrado o no disponible"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Stock insuficiente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Stock insuficiente para el producto \"Martillo\". Stock disponible: 5"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/productos": {
      "get": {
        "tags": [
          "Productos"
        ],
        "summary": "Listar productos con paginación",
        "description": "Obtiene productos del tenant con paginación y búsqueda. Solo retorna productos activos (isActive: true).",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 1,
              "description": "Número de página",
              "example": 1
            },
            "required": false,
            "description": "Número de página",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0,
              "maximum": 100,
              "default": 10,
              "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
              "example": 10
            },
            "required": false,
            "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Término de búsqueda (nombre, código, SKU)",
              "example": "martillo"
            },
            "required": false,
            "description": "Término de búsqueda (nombre, código, SKU)",
            "name": "q",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de productos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductosPaginated"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Productos"
        ],
        "summary": "Crear producto (Solo Admin)",
        "description": "Crea un nuevo producto. El sistema calcula automáticamente el precio_base realizando cálculo inverso desde precio_venta. Ejemplo: precio_venta=100 (CON IGV) → precio_base=84.75 (SIN IGV).",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProducto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Producto creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Producto"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/productos/{id}": {
      "get": {
        "tags": [
          "Productos"
        ],
        "summary": "Obtener producto por ID",
        "description": "Obtiene los detalles completos de un producto específico del tenant.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle del producto",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Producto"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Productos"
        ],
        "summary": "Actualizar producto (Solo Admin)",
        "description": "Actualiza un producto existente. El precio_base se recalcula automáticamente si se modifica precio_venta.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProducto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Producto actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Producto"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/productos/{id}/desactivar": {
      "patch": {
        "tags": [
          "Productos"
        ],
        "summary": "Desactivar producto (Soft Delete - Solo Admin)",
        "description": "Marca el producto como inactivo (isActive: false). El producto no se elimina de la base de datos.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Producto desactivado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/productos/{id}/upload-imagen": {
      "post": {
        "tags": [
          "Productos"
        ],
        "summary": "Subir imagen de producto (Solo Admin)",
        "description": "Sube una imagen a Cloudinary y actualiza el campo imagen_url del producto. Límite: 5 MB. Formatos: JPG, PNG, WEBP.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "imagen": {
                    "type": "string",
                    "format": "binary",
                    "description": "Archivo de imagen (JPG, PNG, WEBP, máx 5 MB)"
                  }
                },
                "required": [
                  "imagen"
                ]
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Imagen subida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "imagen_url": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "message",
                    "imagen_url"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/productos/{id}/imagen": {
      "delete": {
        "tags": [
          "Productos"
        ],
        "summary": "Eliminar imagen de producto (Solo Admin)",
        "description": "Elimina la imagen de Cloudinary y limpia el campo imagen_url del producto.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Imagen eliminada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/categorias": {
      "get": {
        "tags": [
          "Categorías"
        ],
        "summary": "Listar categorías del tenant (Paginado)",
        "description": "Obtiene todas las categorías activas del tenant con paginación estándar.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 1,
              "description": "Número de página",
              "example": 1
            },
            "required": false,
            "description": "Número de página",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0,
              "maximum": 100,
              "default": 10,
              "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
              "example": 10
            },
            "required": false,
            "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista paginada de categorías",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedCategoriaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Categorías"
        ],
        "summary": "Crear categoría (Solo Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCategoria"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Categoría creada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Categoria"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/categorias/{id}": {
      "get": {
        "tags": [
          "Categorías"
        ],
        "summary": "Obtener categoría por ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle de la categoría",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Categoria"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Categorías"
        ],
        "summary": "Actualizar categoría (Solo Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCategoria"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Categoría actualizada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Categoria"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/categorias/{id}/desactivar": {
      "patch": {
        "tags": [
          "Categorías"
        ],
        "summary": "Desactivar categoría (Solo Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Categoría desactivada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/marcas": {
      "get": {
        "tags": [
          "Marcas"
        ],
        "summary": "Listar marcas del tenant (Paginado)",
        "description": "Obtiene todas las marcas activas del tenant con paginación estándar. Accesible para empleados (usado en dropdowns).",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 1,
              "description": "Número de página",
              "example": 1
            },
            "required": false,
            "description": "Número de página",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0,
              "maximum": 100,
              "default": 10,
              "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
              "example": 10
            },
            "required": false,
            "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista paginada de marcas",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedMarcaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Marcas"
        ],
        "summary": "Crear marca (Solo Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMarca"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Marca creada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Marca"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/marcas/{id}": {
      "get": {
        "tags": [
          "Marcas"
        ],
        "summary": "Obtener marca por ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle de la marca",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Marca"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Marcas"
        ],
        "summary": "Actualizar marca (Solo Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMarca"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Marca actualizada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Marca"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/marcas/{id}/desactivar": {
      "patch": {
        "tags": [
          "Marcas"
        ],
        "summary": "Desactivar marca (Solo Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Marca desactivada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/unidades-medida/catalogo-sunat": {
      "get": {
        "tags": [
          "Unidades de Medida"
        ],
        "summary": "Catálogo oficial SUNAT (Público)",
        "description": "Retorna el Catálogo 03 de SUNAT con 32 unidades oficiales. No requiere autenticación. Referencia: Resolución de Superintendencia N° 097-2012/SUNAT.",
        "responses": {
          "200": {
            "description": "Catálogo completo de unidades SUNAT",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "type": "number"
                    },
                    "normativa": {
                      "type": "string"
                    },
                    "referencia": {
                      "type": "string"
                    },
                    "unidades": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "codigo": {
                            "type": "string"
                          },
                          "nombre": {
                            "type": "string"
                          },
                          "permite_decimales": {
                            "type": "boolean"
                          },
                          "categoria": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "codigo",
                          "nombre",
                          "permite_decimales",
                          "categoria"
                        ]
                      }
                    }
                  },
                  "required": [
                    "total",
                    "normativa",
                    "referencia",
                    "unidades"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/unidades-medida": {
      "get": {
        "tags": [
          "Unidades de Medida"
        ],
        "summary": "Listar unidades del tenant (Paginado)",
        "description": "Obtiene todas las unidades de medida registradas por el tenant con paginación estándar. Accesible para empleados.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 1,
              "description": "Número de página",
              "example": 1
            },
            "required": false,
            "description": "Número de página",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0,
              "maximum": 100,
              "default": 10,
              "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
              "example": 10
            },
            "required": false,
            "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista paginada de unidades de medida",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedUnidadMedidaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Unidades de Medida"
        ],
        "summary": "Crear unidad de medida (Solo Admin)",
        "description": "Crea una unidad de medida personalizada. El código debe ser válido según catálogo SUNAT.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUnidadMedida"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Unidad creada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnidadMedida"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/unidades-medida/{id}": {
      "get": {
        "tags": [
          "Unidades de Medida"
        ],
        "summary": "Obtener unidad por ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle de la unidad de medida",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnidadMedida"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Unidades de Medida"
        ],
        "summary": "Actualizar unidad de medida (Solo Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUnidadMedida"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Unidad actualizada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnidadMedida"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Unidades de Medida"
        ],
        "summary": "Eliminar unidad de medida (Solo Admin)",
        "description": "Elimina permanentemente una unidad si no tiene productos asociados.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Unidad eliminada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/clientes": {
      "get": {
        "tags": [
          "Clientes"
        ],
        "summary": "Listar clientes con paginación",
        "description": "Obtiene todos los clientes activos del tenant con paginación estándar.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 1,
              "description": "Número de página",
              "example": 1
            },
            "required": false,
            "description": "Número de página",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0,
              "maximum": 100,
              "default": 10,
              "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
              "example": 10
            },
            "required": false,
            "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista paginada de clientes",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedClienteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Clientes"
        ],
        "summary": "Crear cliente (Admin y Empleado)",
        "description": "Crea un nuevo cliente. DNI debe tener 8 dígitos o RUC 11 dígitos.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCliente"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Cliente creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Cliente"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/clientes/{id}": {
      "get": {
        "tags": [
          "Clientes"
        ],
        "summary": "Obtener cliente por ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle del cliente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Cliente"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Clientes"
        ],
        "summary": "Actualizar cliente (Admin y Empleado)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCliente"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cliente actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Cliente"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/clientes/{id}/desactivar": {
      "patch": {
        "tags": [
          "Clientes"
        ],
        "summary": "Desactivar cliente (Solo Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Cliente desactivado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/proveedores": {
      "get": {
        "tags": [
          "Proveedores"
        ],
        "summary": "Listar proveedores",
        "description": "Lista todos los proveedores activos del tenant. Incluye información de contacto y estado.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de proveedores obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Proveedor"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Proveedores"
        ],
        "summary": "Crear proveedor",
        "description": "Crea un nuevo proveedor con RUC/DNI único. Valida formato de documento de identidad (11 dígitos para RUC, 8 para DNI).",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProveedor"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Proveedor creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Proveedor"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/proveedores/{id}": {
      "get": {
        "tags": [
          "Proveedores"
        ],
        "summary": "Obtener proveedor por ID",
        "description": "Retorna la información detallada de un proveedor específico del tenant.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Proveedor encontrado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Proveedor"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Proveedores"
        ],
        "summary": "Actualizar proveedor",
        "description": "Actualiza los datos de un proveedor existente. Valida unicidad de RUC/DNI si se modifica.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProveedor"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Proveedor actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Proveedor"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/proveedores/{id}/desactivar": {
      "patch": {
        "tags": [
          "Proveedores"
        ],
        "summary": "Desactivar proveedor",
        "description": "Realiza soft-delete del proveedor, cambiando isActive a false. El proveedor no se elimina físicamente de la base de datos.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Proveedor desactivado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/inventario/ajustes": {
      "get": {
        "tags": [
          "Inventario"
        ],
        "summary": "Listar ajustes de inventario",
        "description": "Obtiene el historial de ajustes manuales de inventario con filtros opcionales por producto, tipo y rango de fechas.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "Filtrar por ID de producto",
              "example": 1
            },
            "required": false,
            "description": "Filtrar por ID de producto",
            "name": "producto_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "entrada",
                "salida"
              ],
              "description": "Filtrar por tipo de ajuste",
              "example": "entrada"
            },
            "required": false,
            "description": "Filtrar por tipo de ajuste",
            "name": "tipo",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Fecha de inicio del rango (ISO 8601)",
              "example": "2025-11-01T00:00:00Z"
            },
            "required": false,
            "description": "Fecha de inicio del rango (ISO 8601)",
            "name": "fecha_inicio",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Fecha de fin del rango (ISO 8601)",
              "example": "2025-11-30T23:59:59Z"
            },
            "required": false,
            "description": "Fecha de fin del rango (ISO 8601)",
            "name": "fecha_fin",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de ajustes de inventario",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/InventarioAjuste"
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "integer"
                        },
                        "page": {
                          "type": "integer"
                        },
                        "limit": {
                          "type": "integer"
                        },
                        "totalPages": {
                          "type": "integer"
                        }
                      },
                      "required": [
                        "total",
                        "page",
                        "limit",
                        "totalPages"
                      ]
                    }
                  },
                  "required": [
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Inventario"
        ],
        "summary": "Crear ajuste de inventario",
        "description": "Registra un ajuste manual de inventario (entrada o salida) y actualiza automáticamente el stock del producto.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInventarioAjuste"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ajuste de inventario creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InventarioAjuste"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/inventario/ajustes/{id}": {
      "get": {
        "tags": [
          "Inventario"
        ],
        "summary": "Obtener detalle de ajuste",
        "description": "Consulta los detalles completos de un ajuste de inventario específico incluyendo información del producto y usuario.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Ajuste de inventario encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InventarioAjuste"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Inventario"
        ],
        "summary": "Eliminar ajuste de inventario",
        "description": "Elimina un ajuste de inventario. ADVERTENCIA: No reversa automáticamente el stock afectado. Usar con precaución.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Ajuste eliminado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/cajas": {
      "post": {
        "tags": [
          "Cajas"
        ],
        "summary": "Crear una nueva caja registradora",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCaja"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Caja creada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Caja"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Cajas"
        ],
        "summary": "Obtener todas las cajas registradoras",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Incluir cajas inactivas (true/false)",
              "example": "false"
            },
            "required": false,
            "description": "Incluir cajas inactivas (true/false)",
            "name": "includeInactive",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de cajas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Caja"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/cajas/{id}": {
      "get": {
        "tags": [
          "Cajas"
        ],
        "summary": "Obtener una caja por ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Caja encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Caja"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Cajas"
        ],
        "summary": "Actualizar una caja registradora",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCaja"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Caja actualizada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Caja"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Cajas"
        ],
        "summary": "Desactivar una caja registradora",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Caja desactivada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/series": {
      "get": {
        "tags": [
          "Series SUNAT"
        ],
        "summary": "Listar series del tenant (con filtros)",
        "description": "Obtiene todas las series de comprobantes SUNAT (F001, B001, NV01) del tenant. Permite filtrar por tipo de comprobante e incluir inactivas.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "FACTURA",
                "BOLETA",
                "NOTA_VENTA"
              ],
              "description": "Filtrar por tipo de comprobante",
              "example": "FACTURA"
            },
            "required": false,
            "description": "Filtrar por tipo de comprobante",
            "name": "tipo_comprobante",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Incluir series inactivas (true/false)",
              "example": "false"
            },
            "required": false,
            "description": "Incluir series inactivas (true/false)",
            "name": "includeInactive",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de series",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Serie"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Series SUNAT"
        ],
        "summary": "Crear serie (Solo Admin)",
        "description": "Crea una nueva serie de comprobante. El código debe tener 4 caracteres (ej: F001, B001).",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSerie"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Serie creada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Serie"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/series/{id}": {
      "get": {
        "tags": [
          "Series SUNAT"
        ],
        "summary": "Obtener serie por ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle de la serie",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Serie"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Series SUNAT"
        ],
        "summary": "Actualizar serie (Solo Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSerie"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Serie actualizada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Serie"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Series SUNAT"
        ],
        "summary": "Eliminar serie (Solo Admin)",
        "description": "Elimina permanentemente una serie si no tiene comprobantes asociados.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Serie eliminada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/ventas": {
      "get": {
        "tags": [
          "Ventas (POS)"
        ],
        "summary": "Listar ventas con filtros y paginación",
        "description": "Obtiene ventas del tenant con paginación, búsqueda y filtros por cliente y fecha.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 1,
              "description": "Número de página",
              "example": 1
            },
            "required": false,
            "description": "Número de página",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0,
              "maximum": 100,
              "default": 10,
              "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
              "example": 10
            },
            "required": false,
            "description": "Cantidad de items por página (máx: 100, 0 = sin límite para datos maestros)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Búsqueda por cliente o método de pago",
              "example": "Juan"
            },
            "required": false,
            "description": "Búsqueda por cliente o método de pago",
            "name": "q",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "Filtrar por ID de cliente",
              "example": 1
            },
            "required": false,
            "description": "Filtrar por ID de cliente",
            "name": "cliente_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Fecha de inicio del rango (ISO 8601)",
              "example": "2025-11-01T00:00:00Z"
            },
            "required": false,
            "description": "Fecha de inicio del rango (ISO 8601)",
            "name": "fecha_inicio",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Fecha fin del rango (ISO 8601)",
              "example": "2025-11-30T23:59:59Z"
            },
            "required": false,
            "description": "Fecha fin del rango (ISO 8601)",
            "name": "fecha_fin",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista paginada de ventas",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedVentaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Ventas (POS)"
        ],
        "summary": "Registrar venta (Requiere sesión de caja activa)",
        "description": "Crea una venta completa con validación de stock y descuento automático.\n  \n**Proceso automático:**\n1. Valida sesión de caja ABIERTA del usuario\n2. Determina tipo de comprobante (RUC 11 → FACTURA, otros → BOLETA)\n3. Asigna serie activa y correlativo\n4. Calcula IGV según jerarquía (tenant → producto)\n5. Genera snapshot fiscal inmutable\n6. Valida stock disponible\n7. Descuenta stock de forma atómica\n\n**Snapshot Fiscal:**\n- valor_unitario: Precio sin IGV\n- precio_unitario: Precio con IGV (lo que ingresa el usuario)\n- igv_total: Monto del impuesto\n- tasa_igv: Tasa aplicada (histórica)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateVenta"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Venta creada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Venta"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/ventas/{id}": {
      "get": {
        "tags": [
          "Ventas (POS)"
        ],
        "summary": "Obtener detalle de venta",
        "description": "Retorna la venta con todos sus detalles, cliente y snapshot fiscal inmutable.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle de venta con snapshot fiscal",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Venta"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Ventas (POS)"
        ],
        "summary": "Actualizar venta (Solo Admin - Uso limitado)",
        "description": "Permite actualizar metadatos de la venta. El snapshot fiscal NO puede modificarse.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateVenta"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Venta actualizada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Venta"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Ventas (POS)"
        ],
        "summary": "Eliminar venta (Solo Admin - Uso muy limitado)",
        "description": "⚠️ ADVERTENCIA: Considerar implementar anulación en lugar de eliminación. En producción, las ventas no deben eliminarse por temas legales (SUNAT).",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Venta eliminada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/compras": {
      "get": {
        "tags": [
          "Órdenes de Compra"
        ],
        "summary": "Listar órdenes de compra con filtros",
        "description": "Obtiene todas las órdenes de compra del tenant con filtros opcionales por proveedor, estado y fechas.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "Filtrar por ID de proveedor",
              "example": 1
            },
            "required": false,
            "description": "Filtrar por ID de proveedor",
            "name": "proveedor_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "pendiente",
                "recibida",
                "cancelada"
              ],
              "description": "Filtrar por estado de orden",
              "example": "pendiente"
            },
            "required": false,
            "description": "Filtrar por estado de orden",
            "name": "estado",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Fecha de inicio del rango (ISO 8601)",
              "example": "2025-11-01T00:00:00Z"
            },
            "required": false,
            "description": "Fecha de inicio del rango (ISO 8601)",
            "name": "fecha_inicio",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Fecha de fin del rango (ISO 8601)",
              "example": "2025-11-30T23:59:59Z"
            },
            "required": false,
            "description": "Fecha de fin del rango (ISO 8601)",
            "name": "fecha_fin",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de órdenes de compra",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/OrdenCompra"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Órdenes de Compra"
        ],
        "summary": "Crear una nueva orden de compra",
        "description": "Crea una orden de compra con detalles de productos y proveedor opcional.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateOrdenCompra"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Orden de compra creada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrdenCompra"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/compras/{id}": {
      "get": {
        "tags": [
          "Órdenes de Compra"
        ],
        "summary": "Obtener detalle de orden de compra",
        "description": "Consulta los detalles completos de una orden de compra incluyendo productos y proveedor.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Orden de compra encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrdenCompra"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Órdenes de Compra"
        ],
        "summary": "Actualizar una orden de compra",
        "description": "Actualiza proveedor o estado de una orden de compra existente.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateOrdenCompra"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Orden de compra actualizada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrdenCompra"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Órdenes de Compra"
        ],
        "summary": "Eliminar una orden de compra",
        "description": "Elimina una orden de compra. No se puede eliminar si ya fue recibida.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Orden de compra eliminada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/compras/{id}/recibir": {
      "post": {
        "tags": [
          "Órdenes de Compra"
        ],
        "summary": "Registrar recepción de mercadería",
        "description": "Marca la orden como recibida y actualiza automáticamente el stock de los productos.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RecibirOrdenCompra"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Orden recibida exitosamente, stock actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrdenCompra"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/compras/{id}/cancelar": {
      "post": {
        "tags": [
          "Órdenes de Compra"
        ],
        "summary": "Cancelar una orden de compra",
        "description": "Marca la orden como cancelada. No se puede cancelar si ya fue recibida.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Orden cancelada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrdenCompra"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/pedidos": {
      "get": {
        "tags": [
          "Pedidos"
        ],
        "summary": "Listar pedidos con filtros",
        "description": "Obtiene todos los pedidos del tenant con filtro opcional por estado. Incluye alertas por vencer.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "pendiente",
                "confirmado",
                "cancelado",
                "entregado"
              ],
              "description": "Filtrar por estado del pedido",
              "example": "pendiente"
            },
            "required": false,
            "description": "Filtrar por estado del pedido",
            "name": "estado",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de pedidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Pedido"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/pedidos/{id}": {
      "get": {
        "tags": [
          "Pedidos"
        ],
        "summary": "Obtener detalle de pedido",
        "description": "Consulta los detalles completos de un pedido incluyendo productos y stock actual.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Pedido encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Pedido"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/pedidos/{id}/confirmar": {
      "post": {
        "tags": [
          "Pedidos"
        ],
        "summary": "Confirmar un pedido",
        "description": "Cambia el estado del pedido a confirmado. Solo pedidos pendientes pueden confirmarse.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConfirmarPedido"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Pedido confirmado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Pedido"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/pedidos/{id}/cancelar": {
      "post": {
        "tags": [
          "Pedidos"
        ],
        "summary": "Cancelar un pedido",
        "description": "Cambia el estado del pedido a cancelado. Solo pedidos pendientes o confirmados pueden cancelarse.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CancelarPedido"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Pedido cancelado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Pedido"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/pedidos/{id}/generar-venta": {
      "post": {
        "tags": [
          "Pedidos"
        ],
        "summary": "Generar venta desde pedido",
        "description": "Crea una venta POS desde un pedido confirmado y actualiza automáticamente el stock.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerarVenta"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Venta generada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenerarVentaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/sesiones-caja/apertura": {
      "post": {
        "tags": [
          "Sesiones de Caja"
        ],
        "summary": "Abrir una nueva sesión de caja",
        "description": "Inicia una sesión de caja para el usuario autenticado con monto inicial.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AperturaSesionCaja"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Sesión de caja abierta exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SesionCaja"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/sesiones-caja/{id}/cierre": {
      "post": {
        "tags": [
          "Sesiones de Caja"
        ],
        "summary": "Cerrar una sesión de caja",
        "description": "Cierra una sesión de caja con monto final y calcula diferencias.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CierreSesionCaja"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sesión de caja cerrada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SesionCaja"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/sesiones-caja/activa": {
      "get": {
        "tags": [
          "Sesiones de Caja"
        ],
        "summary": "Obtener sesión activa del usuario",
        "description": "Consulta si el usuario autenticado tiene una sesión de caja abierta.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Consulta exitosa (puede retornar null si no hay sesión activa)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SesionActivaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/sesiones-caja/historial": {
      "get": {
        "tags": [
          "Sesiones de Caja"
        ],
        "summary": "Obtener historial de sesiones",
        "description": "Lista el historial de sesiones con filtros opcionales por caja y usuario.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "Filtrar por ID de caja",
              "example": 1
            },
            "required": false,
            "description": "Filtrar por ID de caja",
            "name": "caja_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "Filtrar por ID de usuario",
              "example": 1
            },
            "required": false,
            "description": "Filtrar por ID de usuario",
            "name": "usuario_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 50,
              "description": "Límite de resultados",
              "example": 50
            },
            "required": false,
            "description": "Límite de resultados",
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de sesiones",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/SesionCaja"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/sesiones-caja/{id}": {
      "get": {
        "tags": [
          "Sesiones de Caja"
        ],
        "summary": "Obtener una sesión por ID",
        "description": "Consulta los detalles de una sesión de caja específica.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Sesión encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SesionCaja"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/sesiones-caja/{id}/cierre-administrativo": {
      "post": {
        "tags": [
          "Sesiones de Caja"
        ],
        "summary": "Cierre administrativo de sesión (Solo Supervisores)",
        "description": "\n    Permite a un supervisor/admin cerrar una sesión de caja de otro usuario.\n    \n    **Caso de uso típico:**\n    - Empleado Pedro dejó su sesión abierta y se fue sin cerrarla\n    - Empleado Juan necesita usar esa caja pero está bloqueada\n    - El Supervisor cuenta el dinero físico que dejó Pedro\n    - El Supervisor ejecuta este endpoint para cerrar la sesión de Pedro\n    - Juan ya puede abrir su turno normalmente\n    \n    **Auditoría:**\n    El sistema registra quién realizó el cierre administrativo y el motivo.\n    \n    **Diferencia con cierre normal:**\n    - Cierre normal: Solo el dueño de la sesión puede cerrarla\n    - Cierre administrativo: Un supervisor cierra la sesión de otro usuario\n  ",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CierreAdministrativo"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sesión cerrada administrativamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SesionCaja"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/movimientos-caja": {
      "post": {
        "tags": [
          "Movimientos de Caja"
        ],
        "summary": "Crear un movimiento de caja (INGRESO/EGRESO)",
        "description": "Registra un ingreso o egreso manual en la sesión activa del usuario.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMovimientoCaja"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Movimiento registrado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MovimientoCaja"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/movimientos-caja/sesion-activa": {
      "get": {
        "tags": [
          "Movimientos de Caja"
        ],
        "summary": "Obtener movimientos de la sesión activa",
        "description": "Lista todos los movimientos de caja de la sesión activa del usuario.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de movimientos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/MovimientoCaja"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/movimientos-caja/sesion/{sesionId}": {
      "get": {
        "tags": [
          "Movimientos de Caja"
        ],
        "summary": "Obtener movimientos de una sesión específica",
        "description": "Lista todos los movimientos de caja de una sesión determinada.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID de la sesión de caja",
              "example": 1
            },
            "required": true,
            "description": "ID de la sesión de caja",
            "name": "sesionId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de movimientos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/MovimientoCaja"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/usuarios": {
      "get": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Listar usuarios del tenant (Solo Admin)",
        "description": "Obtiene todos los usuarios activos e inactivos del tenant actual con paginación y filtros.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de usuarios",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Usuario"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Crear nuevo usuario (Solo Admin)",
        "description": "Crea un usuario empleado o admin para el tenant actual. La contraseña se hashea automáticamente con bcrypt.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUsuario"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Usuario"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/usuarios/{id}": {
      "get": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Obtener usuario por ID (Solo Admin)",
        "description": "Obtiene los detalles de un usuario específico del tenant.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle del usuario",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Usuario"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Actualizar usuario (Solo Admin)",
        "description": "Actualiza email, nombre, rol o contraseña de un usuario. La contraseña es opcional y se hashea automáticamente.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUsuario"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Usuario actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Usuario"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/usuarios/{id}/desactivar": {
      "patch": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Desactivar usuario (Solo Admin)",
        "description": "Marca el usuario como inactivo (soft delete). No permite login posterior. No permite que un usuario se desactive a sí mismo.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario desactivado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/tenant/configuracion": {
      "get": {
        "tags": [
          "Tenant"
        ],
        "summary": "Obtener configuración completa del tenant",
        "description": "Retorna el objeto JSON de configuración del tenant actual. Incluye configuración fiscal (IGV), preferencias de negocio, etc.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Configuración del tenant",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantConfiguracion"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Tenant"
        ],
        "summary": "Actualizar configuración completa del tenant (Solo Admin)",
        "description": "Actualiza el objeto JSON de configuración del tenant mediante merge profundo. Los campos no proporcionados se mantienen.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTenantConfiguracion"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Configuración actualizada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantConfiguracion"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/tenant/configuracion/fiscal": {
      "get": {
        "tags": [
          "Tenant"
        ],
        "summary": "Obtener configuración fiscal del tenant",
        "description": "Retorna solo la configuración tributaria (IGV/IVA) del tenant. Endpoint especializado para la sección de facturación.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Configuración fiscal",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantConfigFiscal"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Tenant"
        ],
        "summary": "Actualizar configuración fiscal (Solo Admin)",
        "description": "Actualiza solo la configuración tributaria del tenant. Útil para cambios de tasa de IGV o migración a zona exonerada. IMPORTANTE: Este cambio NO afecta ventas históricas (usan snapshot).",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTenantConfigFiscal"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Configuración fiscal actualizada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantConfigFiscal"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/reportes/kardex/{productoId}": {
      "get": {
        "tags": [
          "Reportes"
        ],
        "summary": "Obtener Kardex completo de un producto",
        "description": "Genera el reporte Kardex completo de un producto, incluyendo todos los movimientos históricos de ventas, compras y ajustes de inventario ordenados cronológicamente.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del producto",
              "example": 1
            },
            "required": true,
            "description": "ID del producto",
            "name": "productoId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Kardex del producto obtenido exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KardexCompleto"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/auditoria": {
      "get": {
        "tags": [
          "Auditoría"
        ],
        "summary": "Consultar logs de auditoría",
        "description": "Obtiene logs de auditoría con filtros opcionales por usuario, acción, tabla y rango de fechas. Solo accesible para administradores.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "Filtrar por ID de usuario",
              "example": 1
            },
            "required": false,
            "description": "Filtrar por ID de usuario",
            "name": "usuario_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "CREAR",
                "ACTUALIZAR",
                "ELIMINAR",
                "ANULAR",
                "AJUSTAR",
                "LOGIN",
                "LOGOUT"
              ],
              "description": "Filtrar por tipo de acción",
              "example": "CREAR"
            },
            "required": false,
            "description": "Filtrar por tipo de acción",
            "name": "accion",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filtrar por tabla afectada",
              "example": "Productos"
            },
            "required": false,
            "description": "Filtrar por tabla afectada",
            "name": "tabla_afectada",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Fecha de inicio del rango (ISO 8601)",
              "example": "2025-11-01T00:00:00Z"
            },
            "required": false,
            "description": "Fecha de inicio del rango (ISO 8601)",
            "name": "fecha_inicio",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Fecha de fin del rango (ISO 8601)",
              "example": "2025-11-30T23:59:59Z"
            },
            "required": false,
            "description": "Fecha de fin del rango (ISO 8601)",
            "name": "fecha_fin",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "Límite de resultados",
              "example": 100
            },
            "required": false,
            "description": "Límite de resultados",
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de logs de auditoría",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuditoriaList"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/auditoria/estadisticas": {
      "get": {
        "tags": [
          "Auditoría"
        ],
        "summary": "Obtener estadísticas de auditoría",
        "description": "Genera estadísticas de los últimos 7 días: eventos por acción, por tabla y usuarios más activos. Solo accesible para administradores.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estadísticas de auditoría",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EstadisticasAuditoria"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/auditoria/{id}": {
      "get": {
        "tags": [
          "Auditoría"
        ],
        "summary": "Obtener detalle de log específico",
        "description": "Consulta los detalles completos de un log de auditoría específico. Solo accesible para administradores.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "description": "ID del recurso",
              "example": 1
            },
            "required": true,
            "description": "ID del recurso",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Log de auditoría encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuditoriaLog"
                }
              }
            }
          },
          "400": {
            "description": "Error de validación (Datos incorrectos)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error de validación"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        },
                        "required": [
                          "field",
                          "message"
                        ]
                      },
                      "description": "Lista de campos con errores"
                    }
                  },
                  "required": [
                    "message",
                    "errors"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (Token inválido o expirado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autenticado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Prohibido (No tiene permisos suficientes o Tenant inactivo)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Recurso no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Recurso no encontrado"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflicto (Recurso duplicado)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "El recurso ya existe"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    }
  },
  "webhooks": {}
}